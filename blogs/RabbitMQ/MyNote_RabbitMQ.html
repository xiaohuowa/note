<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.67">
    <script>
      (function() {
        const userMode = localStorage.getItem('vuepress-reco-color-scheme') || 'auto';
        const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;

        if (userMode === 'dark' || (userMode === 'auto' && systemDarkMode)) {
          document.documentElement.classList.toggle('dark', true);
        }
      })();
    </script>
    <title>å°ç«å¨ƒçš„ç¬”è®°ä¸­å¿ƒ</title><meta name="description" content="ä¸ªäººç¬”è®°æ”¶çº³">
    <link rel="modulepreload" href="/note/assets/app-55752f72.js"><link rel="modulepreload" href="/note/assets/MyNote_RabbitMQ.html-da23017e.js"><link rel="modulepreload" href="/note/assets/MyNote_RabbitMQ.html-4753aae3.js"><link rel="prefetch" href="/note/assets/index.html-0a05feab.js" as="script"><link rel="prefetch" href="/note/assets/index.html-8c2edf06.js" as="script"><link rel="prefetch" href="/note/assets/index.html-4b3ba946.js" as="script"><link rel="prefetch" href="/note/assets/index.html-142a6c11.js" as="script"><link rel="prefetch" href="/note/assets/index.html-271cd466.js" as="script"><link rel="prefetch" href="/note/assets/index.html-e1595639.js" as="script"><link rel="prefetch" href="/note/assets/index.html-1cb0f698.js" as="script"><link rel="prefetch" href="/note/assets/index.html-0a09ecb8.js" as="script"><link rel="prefetch" href="/note/assets/index.html-38413d9c.js" as="script"><link rel="prefetch" href="/note/assets/index.html-4c6d4b74.js" as="script"><link rel="prefetch" href="/note/assets/index.html-b4bef90e.js" as="script"><link rel="prefetch" href="/note/assets/index.html-45d1e97e.js" as="script"><link rel="prefetch" href="/note/assets/index.html-72f2d894.js" as="script"><link rel="prefetch" href="/note/assets/index.html-6cf06f14.js" as="script"><link rel="prefetch" href="/note/assets/index.html-1a88d37b.js" as="script"><link rel="prefetch" href="/note/assets/index.html-c8e98ed0.js" as="script"><link rel="prefetch" href="/note/assets/index.html-8fceac67.js" as="script"><link rel="prefetch" href="/note/assets/Java.html-2bc64efc.js" as="script"><link rel="prefetch" href="/note/assets/Javajichu.html-da20dcf2.js" as="script"><link rel="prefetch" href="/note/assets/Javaweb.html-dd366bc6.js" as="script"><link rel="prefetch" href="/note/assets/Javaweb2.html-6d9cb558.js" as="script"><link rel="prefetch" href="/note/assets/MySQL.html-93e0a06e.js" as="script"><link rel="prefetch" href="/note/assets/my_python.html-125f6c64.js" as="script"><link rel="prefetch" href="/note/assets/myNote_Redis.html-c1d3463b.js" as="script"><link rel="prefetch" href="/note/assets/Maven.html-5b77d72d.js" as="script"><link rel="prefetch" href="/note/assets/MyNote_MVC.html-ae0bd83b.js" as="script"><link rel="prefetch" href="/note/assets/MyNote_MyBatisPlus.html-b493c3e8.js" as="script"><link rel="prefetch" href="/note/assets/MyNote_Mybatis.html-f7f381af.js" as="script"><link rel="prefetch" href="/note/assets/MyNote_Spring.html-77f78939.js" as="script"><link rel="prefetch" href="/note/assets/MyNote_dongtaidaili.html-41d49ab6.js" as="script"><link rel="prefetch" href="/note/assets/Spring.html-933b20eb.js" as="script"><link rel="prefetch" href="/note/assets/MyNote_SpringBoot.html-097baff8.js" as="script"><link rel="prefetch" href="/note/assets/MyNote_SpringCloud.html-39460cb3.js" as="script"><link rel="prefetch" href="/note/assets/SpringCloudxuexizongjie.html-4d2e65c7.js" as="script"><link rel="prefetch" href="/note/assets/SpringSecurity-congrumendaojingtong-sangengcaotang.html-3a935824.js" as="script"><link rel="prefetch" href="/note/assets/docker.html-da2118bb.js" as="script"><link rel="prefetch" href="/note/assets/Shiro.html-b2a97c2a.js" as="script"><link rel="prefetch" href="/note/assets/LeetCode.html-1b6a7f6c.js" as="script"><link rel="prefetch" href="/note/assets/MyNote_DataStructure.html-a1d4d555.js" as="script"><link rel="prefetch" href="/note/assets/MyNote_scrapy.html-bdf3399a.js" as="script"><link rel="prefetch" href="/note/assets/api.html-2e727ba9.js" as="script"><link rel="prefetch" href="/note/assets/home.html-7d0bb687.js" as="script"><link rel="prefetch" href="/note/assets/plugin.html-051446c1.js" as="script"><link rel="prefetch" href="/note/assets/theme.html-3e47df0a.js" as="script"><link rel="prefetch" href="/note/assets/diyibufen.html-8c1c08c6.js" as="script"><link rel="prefetch" href="/note/assets/dierbufen.html-8c35ae4e.js" as="script"><link rel="prefetch" href="/note/assets/MyNote_Ajax.html-612a52a9.js" as="script"><link rel="prefetch" href="/note/assets/MyNote_Vue.html-909e2b1e.js" as="script"><link rel="prefetch" href="/note/assets/vue3kuaisushangshou.html-bcc860c8.js" as="script"><link rel="prefetch" href="/note/assets/css-HTML5_CSS3tigao.html-ed17f7bd.js" as="script"><link rel="prefetch" href="/note/assets/css-pink.html-6c8c26a1.js" as="script"><link rel="prefetch" href="/note/assets/css-texingï¼Œhezimoxing.html-5a7d83d4.js" as="script"><link rel="prefetch" href="/note/assets/css03-qitayangshi.html-13b71626.js" as="script"><link rel="prefetch" href="/note/assets/css04-qiepianã€shuxieshunxu.html-9588d012.js" as="script"><link rel="prefetch" href="/note/assets/css05-dingwei.html-d7d5bc44.js" as="script"><link rel="prefetch" href="/note/assets/css06-jinglingtuã€zititubiaoã€sanjiao.html-0638af49.js" as="script"><link rel="prefetch" href="/note/assets/cssdonghua.html-e282d2d1.js" as="script"><link rel="prefetch" href="/note/assets/h5-pink.html-19ffa11e.js" as="script"><link rel="prefetch" href="/note/assets/h5c3bijimulu.html-6ff56af3.js" as="script"><link rel="prefetch" href="/note/assets/yidongduan.html-0199452c.js" as="script"><link rel="prefetch" href="/note/assets/404.html-60b35caa.js" as="script"><link rel="prefetch" href="/note/assets/index.html-c7e6c638.js" as="script"><link rel="prefetch" href="/note/assets/index.html-9fbbcbb6.js" as="script"><link rel="prefetch" href="/note/assets/index.html-4886281a.js" as="script"><link rel="prefetch" href="/note/assets/index.html-7e063193.js" as="script"><link rel="prefetch" href="/note/assets/index.html-02c8b461.js" as="script"><link rel="prefetch" href="/note/assets/index.html-8d73f8b3.js" as="script"><link rel="prefetch" href="/note/assets/index.html-b9aae1ef.js" as="script"><link rel="prefetch" href="/note/assets/index.html-9dcded30.js" as="script"><link rel="prefetch" href="/note/assets/index.html-f5f856c6.js" as="script"><link rel="prefetch" href="/note/assets/index.html-6d9582b3.js" as="script"><link rel="prefetch" href="/note/assets/index.html-26a53130.js" as="script"><link rel="prefetch" href="/note/assets/index.html-bfa695d3.js" as="script"><link rel="prefetch" href="/note/assets/index.html-502e371f.js" as="script"><link rel="prefetch" href="/note/assets/index.html-bc5265d7.js" as="script"><link rel="prefetch" href="/note/assets/index.html-68539c35.js" as="script"><link rel="prefetch" href="/note/assets/index.html-9b249731.js" as="script"><link rel="prefetch" href="/note/assets/index.html-7e7b637f.js" as="script"><link rel="prefetch" href="/note/assets/Java.html-616c2ab0.js" as="script"><link rel="prefetch" href="/note/assets/Javajichu.html-d8d6ffa0.js" as="script"><link rel="prefetch" href="/note/assets/Javaweb.html-6d9e61e2.js" as="script"><link rel="prefetch" href="/note/assets/Javaweb2.html-82141ef9.js" as="script"><link rel="prefetch" href="/note/assets/MySQL.html-ea753871.js" as="script"><link rel="prefetch" href="/note/assets/my_python.html-487865d1.js" as="script"><link rel="prefetch" href="/note/assets/myNote_Redis.html-ca665390.js" as="script"><link rel="prefetch" href="/note/assets/Maven.html-60c46893.js" as="script"><link rel="prefetch" href="/note/assets/MyNote_MVC.html-4e08b122.js" as="script"><link rel="prefetch" href="/note/assets/MyNote_MyBatisPlus.html-52f4f30e.js" as="script"><link rel="prefetch" href="/note/assets/MyNote_Mybatis.html-c60bf1da.js" as="script"><link rel="prefetch" href="/note/assets/MyNote_Spring.html-037018a0.js" as="script"><link rel="prefetch" href="/note/assets/MyNote_dongtaidaili.html-771c7c5b.js" as="script"><link rel="prefetch" href="/note/assets/Spring.html-ab5bddf0.js" as="script"><link rel="prefetch" href="/note/assets/MyNote_SpringBoot.html-f76c82b8.js" as="script"><link rel="prefetch" href="/note/assets/MyNote_SpringCloud.html-ed19e9da.js" as="script"><link rel="prefetch" href="/note/assets/SpringCloudxuexizongjie.html-d4a993a2.js" as="script"><link rel="prefetch" href="/note/assets/SpringSecurity-congrumendaojingtong-sangengcaotang.html-5aab70b0.js" as="script"><link rel="prefetch" href="/note/assets/docker.html-a876f4d8.js" as="script"><link rel="prefetch" href="/note/assets/Shiro.html-70cf0e53.js" as="script"><link rel="prefetch" href="/note/assets/LeetCode.html-54e74fa8.js" as="script"><link rel="prefetch" href="/note/assets/MyNote_DataStructure.html-e35f46e7.js" as="script"><link rel="prefetch" href="/note/assets/MyNote_scrapy.html-b8a7f9fc.js" as="script"><link rel="prefetch" href="/note/assets/api.html-1577cdda.js" as="script"><link rel="prefetch" href="/note/assets/home.html-c56faedb.js" as="script"><link rel="prefetch" href="/note/assets/plugin.html-a7053ea4.js" as="script"><link rel="prefetch" href="/note/assets/theme.html-7cb1dd47.js" as="script"><link rel="prefetch" href="/note/assets/diyibufen.html-36064a47.js" as="script"><link rel="prefetch" href="/note/assets/dierbufen.html-099e423e.js" as="script"><link rel="prefetch" href="/note/assets/MyNote_Ajax.html-db17be72.js" as="script"><link rel="prefetch" href="/note/assets/MyNote_Vue.html-f399b502.js" as="script"><link rel="prefetch" href="/note/assets/vue3kuaisushangshou.html-6e3ead4b.js" as="script"><link rel="prefetch" href="/note/assets/css-HTML5_CSS3tigao.html-5dd29956.js" as="script"><link rel="prefetch" href="/note/assets/css-pink.html-f52dbeeb.js" as="script"><link rel="prefetch" href="/note/assets/css-texingï¼Œhezimoxing.html-a7088dd1.js" as="script"><link rel="prefetch" href="/note/assets/css03-qitayangshi.html-9f111ed1.js" as="script"><link rel="prefetch" href="/note/assets/css04-qiepianã€shuxieshunxu.html-a770ab52.js" as="script"><link rel="prefetch" href="/note/assets/css05-dingwei.html-20bf4d13.js" as="script"><link rel="prefetch" href="/note/assets/css06-jinglingtuã€zititubiaoã€sanjiao.html-abf38e61.js" as="script"><link rel="prefetch" href="/note/assets/cssdonghua.html-bb486f97.js" as="script"><link rel="prefetch" href="/note/assets/h5-pink.html-ef0cbeea.js" as="script"><link rel="prefetch" href="/note/assets/h5c3bijimulu.html-85188b97.js" as="script"><link rel="prefetch" href="/note/assets/yidongduan.html-338a725f.js" as="script"><link rel="prefetch" href="/note/assets/404.html-8d3a4bcd.js" as="script"><link rel="prefetch" href="/note/assets/reco-valine-a195b6e9.js" as="script"><link rel="prefetch" href="/note/assets/giscus-2a044aea-497f0bd4.js" as="script">
    <link rel="preload" href="/note/assets/style-09177ac9.css" as="style"><link rel="stylesheet" href="/note/assets/style-09177ac9.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><div class="common-wrapper series--no show-catalog"><header class="navbar-container" style="top:0;"><div class="site-brand nav-item"><img class="logo" src="/note/logo.png" alt="å°ç«å¨ƒçš„ç¬”è®°ä¸­å¿ƒ"><a href="/note/" class="site-name can-hide">å°ç«å¨ƒçš„ç¬”è®°ä¸­å¿ƒ</a></div><div class="nav-item navbar-links-wrapper" style=""><div><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form></div><nav class="navbar-links"><!--[--><div class="navbar-links__item"><a href="/note/" class="link router-link-active" aria-label="é¦–é¡µ"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->é¦–é¡µ<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="åˆ†ç±»"><span class="xicon-container left title"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->åˆ†ç±»<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="åˆ†ç±»"><span class="title"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->åˆ†ç±»<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><a href="/note/categories/Java/1/" class="link" aria-label="Java"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Java<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/note/categories/Javaweb/1/" class="link" aria-label="Javaweb"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Javaweb<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/note/categories/MySQL/1/" class="link" aria-label="MySQL"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->MySQL<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/note/categories/SSM/1/" class="link" aria-label="SSM"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->SSM<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/note/categories/SpringBoot/1/" class="link" aria-label="SpringBoot"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->SpringBoot<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/note/categories/SpringSecurity/1/" class="link" aria-label="SpringSecurity"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->SpringSecurity<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/note/categories/shiro/1/" class="link" aria-label="shiro"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->shiro<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/note/categories/qianduan/Ajax/1/" class="link" aria-label="å‰ç«¯/Ajax"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->å‰ç«¯/Ajax<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/note/categories/qianduan/Vue/1/" class="link" aria-label="å‰ç«¯/Vue"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->å‰ç«¯/Vue<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/note/categories/qianduan/H5C3/h5c3-wodebiji/1/" class="link" aria-label="å‰ç«¯/H5C3/h5c3-æˆ‘çš„ç¬”è®°"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->å‰ç«¯/H5C3/h5c3-æˆ‘çš„ç¬”è®°<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="æ ‡ç­¾"><span class="xicon-container left title"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->æ ‡ç­¾<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="æ ‡ç­¾"><span class="title"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->æ ‡ç­¾<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><!--]--></ul></div></div><div class="navbar-links__item"><a href="/note/pre-reading.html" class="link" aria-label="å…ˆçœ‹"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->å…ˆçœ‹<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/note/computer/" class="link" aria-label="è®¡ç®—æœº"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->è®¡ç®—æœº<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="åŸºçŸ³"><span class="xicon-container left title"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->åŸºçŸ³<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="åŸºçŸ³"><span class="title"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->åŸºçŸ³<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><a href="/note/cornerstone/math/" class="link" aria-label="æ•°å­¦"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->æ•°å­¦<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="ç³»ç»Ÿ"><span class="xicon-container left title"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->ç³»ç»Ÿ<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="ç³»ç»Ÿ"><span class="title"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->ç³»ç»Ÿ<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><a href="/note/os/linux/" class="link" aria-label="Linux"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Linux<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/note/os/arch/" class="link" aria-label="Arch"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Arch<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/note/os/manjaro/" class="link" aria-label="Manjaro"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Manjaro<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/note/os/ubuntu/" class="link" aria-label="Ubuntu"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Ubuntu<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/note/os/centos/" class="link" aria-label="CentOS"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->CentOS<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/note/os/kubernetes/" class="link" aria-label="Kubernetes"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Kubernetes<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="å‰ç«¯"><span class="xicon-container left title"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->å‰ç«¯<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="å‰ç«¯"><span class="title"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->å‰ç«¯<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><a href="/note/blogs/å‰ç«¯/Ajax/MyNote_Ajax.md" class="link" aria-label="Ajax"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Ajax<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/note/blogs/å‰ç«¯/H5C3/h5c3-æˆ‘çš„ç¬”è®°/css-pink.md" class="link" aria-label="CSS"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->CSS<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/note/blogs/å‰ç«¯/Vue/MyNote_Vue.md" class="link" aria-label="Vue"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Vue<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="åç«¯"><span class="xicon-container left title"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->åç«¯<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="åç«¯"><span class="title"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->åç«¯<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><a href="/note/blogs/Javaweb/Javaweb.md" class="link" aria-label="Javaweb"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Javaweb<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links__item"><a href="/note/algorithms/" class="link" aria-label="ç®—æ³•"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->ç®—æ³•<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="è®¾è®¡"><span class="xicon-container left title"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->è®¾è®¡<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="è®¾è®¡"><span class="title"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->è®¾è®¡<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><a href="/note/design/pixel/" class="link" aria-label="åƒç´ é£"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->åƒç´ é£<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="å¼€å‘å·¥å…·"><span class="xicon-container left title"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->å¼€å‘å·¥å…·<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="å¼€å‘å·¥å…·"><span class="title"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->å¼€å‘å·¥å…·<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><a href="/note/tools/git/" class="link" aria-label="Git"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Git<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/note/tools/github/" class="link" aria-label="Github"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Github<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/note/tools/vscode/" class="link" aria-label="VSCode"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->VSCode<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/note/tools/chrome/" class="link" aria-label="Chrome"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Chrome<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/note/tools/google/" class="link" aria-label="Google"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Google<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/note/tools/bookmark-scripts/" class="link" aria-label="Bookmark scripts"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Bookmark scripts<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="æ›´å¤š"><span class="xicon-container left title"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->æ›´å¤š<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="æ›´å¤š"><span class="title"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->æ›´å¤š<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><a href="/note/more/navigation.html" class="link" aria-label="å¯¼èˆª ğŸ‰"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->å¯¼èˆª ğŸ‰<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a class="link" href="https://shanyuhai123.github.io/vuepress-plugin-auto-sidebar/zh/" target="_blank" rel="noopener noreferrer" aria-label="VuePress ä¾§è¾¹æ æ’ä»¶"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->VuePress ä¾§è¾¹æ æ’ä»¶<!--]--></span></span><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a class="link" href="https://vuepress.vuejs.org/zh/" target="_blank" rel="noopener noreferrer" aria-label="VuePress å®˜ç½‘"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->VuePress å®˜ç½‘<!--]--></span></span><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links__item"><a class="link" href="https://www.travellings.cn/go.html" target="_blank" rel="noopener noreferrer" aria-label="ğŸš‡ å¼€å¾€"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->ğŸš‡ å¼€å¾€<!--]--></span></span><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><span class="xicon-container btn-toggle-dark-mode btn--dark-mode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M15 2h2v3h-2z" fill="currentColor"></path><path d="M27 15h3v2h-3z" fill="currentColor"></path><path d="M15 27h2v3h-2z" fill="currentColor"></path><path d="M2 15h3v2H2z" fill="currentColor"></path><path d="M5.45 6.884l1.414-1.415l2.121 2.122l-1.414 1.414z" fill="currentColor"></path><path d="M23 7.58l2.121-2.12l1.414 1.414l-2.121 2.121z" fill="currentColor"></path><path d="M23.002 24.416l1.415-1.414l2.12 2.122l-1.413 1.414z" fill="currentColor"></path><path d="M5.47 25.13L7.59 23L9 24.42l-2.12 2.12l-1.41-1.41z" fill="currentColor"></path><path d="M16 8a8 8 0 1 0 8 8a8 8 0 0 0-8-8zm0 14a6 6 0 0 1 0-12z" fill="currentColor"></path></svg></span><span class="xicon-container btn-toggle-menus"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:inherit;"><circle cx="16" cy="8" r="2" fill="currentColor"></circle><circle cx="16" cy="16" r="2" fill="currentColor"></circle><circle cx="16" cy="24" r="2" fill="currentColor"></circle></svg></span></div></header><!----><div class="mobile-menus-container"><nav class="navbar-links mobile"><!--[--><div class="navbar-links__item"><a href="/note/" class="link router-link-active" aria-label="é¦–é¡µ"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->é¦–é¡µ<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="åˆ†ç±»"><span class="xicon-container left title"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->åˆ†ç±»<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="åˆ†ç±»"><span class="title"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->åˆ†ç±»<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><a href="/note/categories/Java/1/" class="link" aria-label="Java"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Java<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/note/categories/Javaweb/1/" class="link" aria-label="Javaweb"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Javaweb<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/note/categories/MySQL/1/" class="link" aria-label="MySQL"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->MySQL<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/note/categories/SSM/1/" class="link" aria-label="SSM"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->SSM<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/note/categories/SpringBoot/1/" class="link" aria-label="SpringBoot"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->SpringBoot<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/note/categories/SpringSecurity/1/" class="link" aria-label="SpringSecurity"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->SpringSecurity<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/note/categories/shiro/1/" class="link" aria-label="shiro"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->shiro<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/note/categories/qianduan/Ajax/1/" class="link" aria-label="å‰ç«¯/Ajax"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->å‰ç«¯/Ajax<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/note/categories/qianduan/Vue/1/" class="link" aria-label="å‰ç«¯/Vue"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->å‰ç«¯/Vue<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/note/categories/qianduan/H5C3/h5c3-wodebiji/1/" class="link" aria-label="å‰ç«¯/H5C3/h5c3-æˆ‘çš„ç¬”è®°"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->å‰ç«¯/H5C3/h5c3-æˆ‘çš„ç¬”è®°<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="æ ‡ç­¾"><span class="xicon-container left title"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->æ ‡ç­¾<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="æ ‡ç­¾"><span class="title"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->æ ‡ç­¾<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><!--]--></ul></div></div><div class="navbar-links__item"><a href="/note/pre-reading.html" class="link" aria-label="å…ˆçœ‹"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->å…ˆçœ‹<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/note/computer/" class="link" aria-label="è®¡ç®—æœº"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->è®¡ç®—æœº<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="åŸºçŸ³"><span class="xicon-container left title"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->åŸºçŸ³<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="åŸºçŸ³"><span class="title"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->åŸºçŸ³<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><a href="/note/cornerstone/math/" class="link" aria-label="æ•°å­¦"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->æ•°å­¦<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="ç³»ç»Ÿ"><span class="xicon-container left title"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->ç³»ç»Ÿ<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="ç³»ç»Ÿ"><span class="title"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->ç³»ç»Ÿ<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><a href="/note/os/linux/" class="link" aria-label="Linux"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Linux<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/note/os/arch/" class="link" aria-label="Arch"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Arch<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/note/os/manjaro/" class="link" aria-label="Manjaro"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Manjaro<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/note/os/ubuntu/" class="link" aria-label="Ubuntu"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Ubuntu<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/note/os/centos/" class="link" aria-label="CentOS"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->CentOS<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/note/os/kubernetes/" class="link" aria-label="Kubernetes"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Kubernetes<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="å‰ç«¯"><span class="xicon-container left title"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->å‰ç«¯<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="å‰ç«¯"><span class="title"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->å‰ç«¯<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><a href="/note/blogs/å‰ç«¯/Ajax/MyNote_Ajax.md" class="link" aria-label="Ajax"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Ajax<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/note/blogs/å‰ç«¯/H5C3/h5c3-æˆ‘çš„ç¬”è®°/css-pink.md" class="link" aria-label="CSS"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->CSS<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/note/blogs/å‰ç«¯/Vue/MyNote_Vue.md" class="link" aria-label="Vue"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Vue<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="åç«¯"><span class="xicon-container left title"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->åç«¯<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="åç«¯"><span class="title"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->åç«¯<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><a href="/note/blogs/Javaweb/Javaweb.md" class="link" aria-label="Javaweb"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Javaweb<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links__item"><a href="/note/algorithms/" class="link" aria-label="ç®—æ³•"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->ç®—æ³•<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="è®¾è®¡"><span class="xicon-container left title"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->è®¾è®¡<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="è®¾è®¡"><span class="title"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->è®¾è®¡<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><a href="/note/design/pixel/" class="link" aria-label="åƒç´ é£"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->åƒç´ é£<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="å¼€å‘å·¥å…·"><span class="xicon-container left title"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->å¼€å‘å·¥å…·<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="å¼€å‘å·¥å…·"><span class="title"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->å¼€å‘å·¥å…·<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><a href="/note/tools/git/" class="link" aria-label="Git"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Git<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/note/tools/github/" class="link" aria-label="Github"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Github<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/note/tools/vscode/" class="link" aria-label="VSCode"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->VSCode<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/note/tools/chrome/" class="link" aria-label="Chrome"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Chrome<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/note/tools/google/" class="link" aria-label="Google"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Google<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/note/tools/bookmark-scripts/" class="link" aria-label="Bookmark scripts"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Bookmark scripts<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="æ›´å¤š"><span class="xicon-container left title"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->æ›´å¤š<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="æ›´å¤š"><span class="title"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->æ›´å¤š<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><a href="/note/more/navigation.html" class="link" aria-label="å¯¼èˆª ğŸ‰"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->å¯¼èˆª ğŸ‰<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a class="link" href="https://shanyuhai123.github.io/vuepress-plugin-auto-sidebar/zh/" target="_blank" rel="noopener noreferrer" aria-label="VuePress ä¾§è¾¹æ æ’ä»¶"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->VuePress ä¾§è¾¹æ æ’ä»¶<!--]--></span></span><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a class="link" href="https://vuepress.vuejs.org/zh/" target="_blank" rel="noopener noreferrer" aria-label="VuePress å®˜ç½‘"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->VuePress å®˜ç½‘<!--]--></span></span><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links__item"><a class="link" href="https://www.travellings.cn/go.html" target="_blank" rel="noopener noreferrer" aria-label="ğŸš‡ å¼€å¾€"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->ğŸš‡ å¼€å¾€<!--]--></span></span><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><div class="appearance"><span>Appearance</span><span class="xicon-container btn-toggle-dark-mode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M15 2h2v3h-2z" fill="currentColor"></path><path d="M27 15h3v2h-3z" fill="currentColor"></path><path d="M15 27h2v3h-2z" fill="currentColor"></path><path d="M2 15h3v2H2z" fill="currentColor"></path><path d="M5.45 6.884l1.414-1.415l2.121 2.122l-1.414 1.414z" fill="currentColor"></path><path d="M23 7.58l2.121-2.12l1.414 1.414l-2.121 2.121z" fill="currentColor"></path><path d="M23.002 24.416l1.415-1.414l2.12 2.122l-1.413 1.414z" fill="currentColor"></path><path d="M5.47 25.13L7.59 23L9 24.42l-2.12 2.12l-1.41-1.41z" fill="currentColor"></path><path d="M16 8a8 8 0 1 0 8 8a8 8 0 0 0-8-8zm0 14a6 6 0 0 1 0-12z" fill="currentColor"></path></svg></span></div></div><div class="series-mask"></div><aside class="series-container"><div class="site-brand"><img class="logo" src="/note/logo.png" alt="å°ç«å¨ƒçš„ç¬”è®°ä¸­å¿ƒ"><a href="/note/" class="site-name can-hide">å°ç«å¨ƒçš„ç¬”è®°ä¸­å¿ƒ</a></div><!--[--><!--]--></aside><!--[--><main class="page-container"><!----><div class="page-info"><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M16 4a5 5 0 1 1-5 5a5 5 0 0 1 5-5m0-2a7 7 0 1 0 7 7a7 7 0 0 0-7-7z" fill="currentColor"></path><path d="M26 30h-2v-5a5 5 0 0 0-5-5h-6a5 5 0 0 0-5 5v5H6v-5a7 7 0 0 1 7-7h6a7 7 0 0 1 7 7z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->xiaohuowa<!--]--></span></span><!----><!----><!----><!----></div><div class="theme-reco-default-content"><div><h2 id="_1-rabbitmqå·¥ä½œæ¨¡å‹" tabindex="-1"><a class="header-anchor" href="#_1-rabbitmqå·¥ä½œæ¨¡å‹" aria-hidden="true">#</a> 1. RabbitMQå·¥ä½œæ¨¡å‹</h2><blockquote><p>æ¶ˆæ¯é˜Ÿåˆ—æœ‰ä¸‰ä¸ªæ ¸å¿ƒè¦ç´ ï¼š æ¶ˆæ¯ç”Ÿäº§è€…ã€æ¶ˆæ¯é˜Ÿåˆ—ã€æ¶ˆæ¯æ¶ˆè´¹è€…ï¼›</p></blockquote><ol><li>æ¶ˆæ¯ä»<code>ç”Ÿäº§è€…</code>åˆ°<code>è¿æ¥ä¿¡é“</code>åˆ°æ¶ˆæ¯æœåŠ¡å™¨<code>Broker</code></li><li>åœ¨<code>Broker</code>ä¸­åˆ°è¾¾å¯¹åº”<code>äº¤æ¢æœº</code>ä¸­</li><li>äº¤æ¢æœºæ ¹æ®ä¸€å®šçš„ç­–ç•¥åˆ†å‘åˆ°<code>é˜Ÿåˆ—</code>ä¸­</li><li>å†ç”±æ¶ˆè´¹è€…æ¥æ”¶æ¶ˆæ¯ã€‚ <img src="https://img-blog.csdnimg.cn/43e2207a6230497d8c31b4971f7800f7.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></li></ol><h3 id="_1-1-å„éƒ¨åˆ†è§’è‰²ä»‹ç»" tabindex="-1"><a class="header-anchor" href="#_1-1-å„éƒ¨åˆ†è§’è‰²ä»‹ç»" aria-hidden="true">#</a> 1.1. å„éƒ¨åˆ†è§’è‰²ä»‹ç»</h3><ul><li><code>ç”Ÿäº§è€…</code>ï¼ˆProducerï¼‰ï¼šå‘é€æ¶ˆæ¯çš„åº”ç”¨ï¼›ï¼ˆjavaç¨‹åºï¼Œä¹Ÿå¯èƒ½æ˜¯åˆ«çš„è¯­è¨€å†™çš„ç¨‹åºï¼‰</li><li><code>æ¶ˆè´¹è€…</code>ï¼ˆConsumerï¼‰ï¼šæ¥æ”¶æ¶ˆæ¯çš„åº”ç”¨ï¼›ï¼ˆjavaç¨‹åºï¼Œä¹Ÿå¯èƒ½æ˜¯åˆ«çš„è¯­è¨€å†™çš„ç¨‹åºï¼‰</li><li><code>ä»£ç†</code>ï¼ˆBrokerï¼‰ï¼šå°±æ˜¯æ¶ˆæ¯æœåŠ¡å™¨ï¼ŒRabbitMQ Serverå°±æ˜¯Message Brokerï¼›</li><li><code>è¿æ¥</code>ï¼ˆConnectionï¼‰ï¼šè¿æ¥RabbitMQæœåŠ¡å™¨çš„TCPé•¿è¿æ¥ï¼›</li><li><code>ä¿¡é“</code>ï¼ˆChannelï¼‰ï¼šè¿æ¥ä¸­çš„ä¸€ä¸ªè™šæ‹Ÿé€šé“ï¼Œæ¶ˆæ¯é˜Ÿåˆ—å‘é€æˆ–è€…æ¥æ”¶æ¶ˆæ¯æ—¶ï¼Œéƒ½æ˜¯é€šè¿‡ä¿¡é“è¿›è¡Œçš„ï¼›</li><li><code>è™šæ‹Ÿä¸»æœº</code>ï¼ˆVirtual hostï¼‰ï¼šä¸€ä¸ªè™šæ‹Ÿåˆ†ç»„ï¼Œåœ¨ä»£ç ä¸­å°±æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå½“å¤šä¸ªä¸åŒçš„ç”¨æˆ·ä½¿ç”¨åŒä¸€ä¸ªRabbitMQæœåŠ¡æ—¶ï¼Œå¯ä»¥åˆ’åˆ†å‡ºå¤šä¸ªVirtual hostï¼Œæ¯ä¸ªç”¨æˆ·åœ¨è‡ªå·±çš„Virtual hoståˆ›å»ºexchange/queueç­‰ï¼›ï¼ˆåˆ†ç±»æ¯”è¾ƒæ¸…æ™°ã€ç›¸äº’éš”ç¦»ï¼‰</li><li><code>äº¤æ¢æœº</code>ï¼ˆExchangeï¼‰ï¼šäº¤æ¢æœºè´Ÿè´£ä»ç”Ÿäº§è€…æ¥æ”¶æ¶ˆæ¯ï¼Œå¹¶æ ¹æ®äº¤æ¢æœºç±»å‹åˆ†å‘åˆ°å¯¹åº”çš„æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œèµ·åˆ°ä¸€ä¸ªè·¯ç”±çš„ä½œç”¨ï¼›</li><li><code>è·¯ç”±é”®</code>ï¼ˆRouting Keyï¼‰ï¼šäº¤æ¢æœºæ ¹æ®è·¯ç”±é”®æ¥å†³å®šæ¶ˆæ¯åˆ†å‘åˆ°å“ªä¸ªé˜Ÿåˆ—ï¼Œè·¯ç”±é”®æ˜¯æ¶ˆæ¯çš„ç›®çš„åœ°å€ï¼›</li><li><code>ç»‘å®š</code>ï¼ˆBindingï¼‰ï¼šç»‘å®šæ˜¯é˜Ÿåˆ—å’Œäº¤æ¢æœºçš„ä¸€ä¸ªå…³è”è¿æ¥ï¼ˆå…³è”å…³ç³»ï¼‰ï¼›</li><li><code>é˜Ÿåˆ—</code>ï¼ˆQueueï¼‰ï¼šå­˜å‚¨æ¶ˆæ¯çš„ç¼“å­˜ï¼›</li><li><code>æ¶ˆæ¯</code>ï¼ˆMessageï¼‰ï¼šç”±ç”Ÿäº§è€…é€šè¿‡RabbitMQå‘é€ç»™æ¶ˆè´¹è€…çš„ä¿¡æ¯ï¼›ï¼ˆæ¶ˆæ¯å¯ä»¥ä»»ä½•æ•°æ®ï¼Œå­—ç¬¦ä¸²ã€userå¯¹è±¡ï¼Œjsonä¸²ç­‰ç­‰ï¼‰</li></ul><h2 id="_2-åœ¨springbootä¸­ä½¿ç”¨rabbitmqæ­¥éª¤" tabindex="-1"><a class="header-anchor" href="#_2-åœ¨springbootä¸­ä½¿ç”¨rabbitmqæ­¥éª¤" aria-hidden="true">#</a> 2. åœ¨SpringBootä¸­ä½¿ç”¨RabbitMQæ­¥éª¤</h2><h3 id="_2-1-åŠ å…¥amqpä¾èµ–" tabindex="-1"><a class="header-anchor" href="#_2-1-åŠ å…¥amqpä¾èµ–" aria-hidden="true">#</a> 2.1. åŠ å…¥<code>AMQP</code>ä¾èµ–</h3><blockquote><p>ä¸ºä»€ä¹ˆæ˜¯<code>AMQP</code>ï¼Ÿ</p><p>AMQPï¼ˆAdvanced Message Queue Protocol é«˜çº§æ¶ˆæ¯é˜Ÿåˆ—åè®®ï¼‰ï¼šæ˜¯ä¸€ä¸ª<strong>ç½‘ç»œåè®®</strong>ï¼Œå®ƒæ”¯æŒç¬¦åˆæ¡ä»¶çš„å®¢æˆ·ç«¯å’Œæ¶ˆæ¯ä»£ç†ä¸­é—´ä»¶ï¼ˆmessage middleware brokerï¼‰è¿›è¡Œé€šè®¯ã€‚</p><p>RabbitMQæ˜¯AMQPåè®®çš„å®ç°è€…ï¼Œæ‰€ä»¥AMQPä¸­çš„æ¦‚å¿µå’Œå‡†åˆ™ä¹Ÿé€‚ç”¨äºRabbitMQã€‚</p></blockquote><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-amqp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-2-ç¼–å†™rabbitmqé…ç½®ç±»" tabindex="-1"><a class="header-anchor" href="#_2-2-ç¼–å†™rabbitmqé…ç½®ç±»" aria-hidden="true">#</a> 2.2. ç¼–å†™RabbitMQé…ç½®ç±»</h3><blockquote><p>åœ¨é…ç½®ç±»ä¸­ï¼Œå£°æ˜é˜Ÿåˆ—å’Œäº¤æ¢æœºï¼ŒåŒæ—¶ç»‘å®šå®ƒä»¬çš„å…³ç³»ï¼Œå°†å®ƒä»¬çš„å®ä¾‹éƒ½äº¤ç»™Springå®¹å™¨è¿›è¡Œç®¡ç†</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RabbitConfig</span> <span class="token punctuation">{</span>

    <span class="token doc-comment comment">/**
     * 1. å®šä¹‰äº¤æ¢æœº
     * 2. å®šä¹‰é˜Ÿåˆ—
     * 3. ç»‘å®šäº¤æ¢æœºå’Œé˜Ÿåˆ—
     */</span>

    <span class="token doc-comment comment">/**
     * 1.å®šä¹‰äº¤æ¢æœº
     */</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">FanoutExchange</span> <span class="token function">fanoutExchange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">FanoutExchange</span><span class="token punctuation">(</span><span class="token string">&quot;exchange.fanout&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * 2.å®šä¹‰é˜Ÿåˆ—
     */</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Queue</span> <span class="token function">queueA</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Queue</span><span class="token punctuation">(</span><span class="token string">&quot;queue.fanout.a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Queue</span> <span class="token function">queueB</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Queue</span><span class="token punctuation">(</span><span class="token string">&quot;queue.fanout.b&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * 3.ç»‘å®šäº¤æ¢æœºå’Œé˜Ÿåˆ—
     * æ³¨æ„ï¼Œè¿™é‡Œæ–¹æ³•çš„å½¢å‚æ˜¯ä¼šè‡ªåŠ¨æ³¨å…¥çš„ï¼Œæ‰€ä»¥å†™çš„æ—¶å€™è¦å’Œåˆ›å»ºBeançš„æ—¶å€™ç±»å‹å’Œæ–¹æ³•åä¸€è‡´æ‰èƒ½æ³¨å…¥æˆåŠŸ
     */</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Binding</span> <span class="token function">bindingA</span><span class="token punctuation">(</span><span class="token class-name">FanoutExchange</span> fanoutExchange<span class="token punctuation">,</span> <span class="token class-name">Queue</span> queueA<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// å°†é˜Ÿåˆ—aç»‘å®šåˆ°äº¤æ¢æœº</span>
        <span class="token keyword">return</span> <span class="token class-name">BindingBuilder</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>queueA<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span>fanoutExchange<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Binding</span> <span class="token function">bindingB</span><span class="token punctuation">(</span><span class="token class-name">FanoutExchange</span> fanoutExchange<span class="token punctuation">,</span> <span class="token class-name">Queue</span> queueB<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// å°†é˜Ÿåˆ—bç»‘å®šåˆ°äº¤æ¢æœº</span>
        <span class="token keyword">return</span> <span class="token class-name">BindingBuilder</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>queueB<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span>fanoutExchange<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-3-å‘é€æ¶ˆæ¯" tabindex="-1"><a class="header-anchor" href="#_2-3-å‘é€æ¶ˆæ¯" aria-hidden="true">#</a> 2.3. å‘é€æ¶ˆæ¯</h3><blockquote><p>åœ¨å‘é€æ¶ˆæ¯çš„åœ°æ–¹ï¼Œæ³¨å…¥<code>org.springframework.amqp.rabbit.core.RabbitTemplate</code>ï¼Œå°†è¦å‘é€çš„æ¶ˆæ¯å°è£…ä¸º<code>org.springframework.amqp.core.Message</code>å¯¹è±¡ï¼Œé€šè¿‡<code>rabbitTemplate</code>æ¥å®ç°å‘é€æ¶ˆæ¯çš„æ“ä½œã€‚</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>amqp<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">Message</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>amqp<span class="token punctuation">.</span>rabbit<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">RabbitTemplate</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Date</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MsgService</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">RabbitTemplate</span> rabbitTemplate<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sendMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> msg <span class="token operator">=</span> <span class="token string">&quot;Hello world!&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">Message</span> message <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Message</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        rabbitTemplate<span class="token punctuation">.</span><span class="token function">convertAndSend</span><span class="token punctuation">(</span><span class="token string">&quot;exchange.fanout&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;æ¶ˆæ¯å‘é€å®Œæ¯•ï¼Œå‘é€æ—¶é—´ä¸ºï¼š{}&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-4-æ¥æ”¶æ¶ˆæ¯" tabindex="-1"><a class="header-anchor" href="#_2-4-æ¥æ”¶æ¶ˆæ¯" aria-hidden="true">#</a> 2.4. æ¥æ”¶æ¶ˆæ¯</h3><blockquote><p>é€šè¿‡<code>@RabbitListener</code>æ¥æŒ‡å®šç›‘å¬çš„é˜Ÿåˆ—ï¼Œå½“é˜Ÿåˆ—æœ‰æ¶ˆæ¯çš„æ—¶å€™å°±ä¼šè°ƒç”¨æ–¹æ³•</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>amqp<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">Message</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>amqp<span class="token punctuation">.</span>rabbit<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RabbitListener</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Slf4j</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ReceiveMsg</span> <span class="token punctuation">{</span>
    <span class="token doc-comment comment">/**
     * æ¥æ”¶ä¸¤ä¸ªé˜Ÿåˆ—æ¶ˆæ¯
     * <span class="token keyword">@param</span> <span class="token parameter">message</span>
     */</span>
    <span class="token annotation punctuation">@RabbitListener</span><span class="token punctuation">(</span>queues <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;queue.fanout.a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;queue.fanout.b&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">receiveMsg</span><span class="token punctuation">(</span><span class="token class-name">Message</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> body <span class="token operator">=</span> message<span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> string <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;æ¥æ”¶åˆ°æ¶ˆæ¯ï¼š{}&quot;</span><span class="token punctuation">,</span> string<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-äº¤æ¢æœºexchange" tabindex="-1"><a class="header-anchor" href="#_3-äº¤æ¢æœºexchange" aria-hidden="true">#</a> 3. äº¤æ¢æœºExchange</h2><blockquote><p>äº¤æ¢æœºä¸»è¦å°±æ˜¯ä»¥ä¸‹å››ç±»</p><p>é€šè¿‡æ’ä»¶è¿˜å¯ä»¥æ‰©å±•å…¶ä»–ç§ç±»çš„äº¤æ¢æœº</p></blockquote><p>1ã€Fanout Exchangeï¼ˆæ‰‡å½¢ï¼‰ 2ã€Direct Exchangeï¼ˆç›´è¿ï¼‰ 3ã€Topic Exchangeï¼ˆä¸»é¢˜ï¼‰ 4ã€Headers Exchangeï¼ˆå¤´éƒ¨ï¼‰</p><h3 id="_3-1-æ‰‡å½¢äº¤æ¢æœº-fanout-exchange" tabindex="-1"><a class="header-anchor" href="#_3-1-æ‰‡å½¢äº¤æ¢æœº-fanout-exchange" aria-hidden="true">#</a> 3.1. æ‰‡å½¢äº¤æ¢æœºï¼ˆFanout Exchangeï¼‰</h3><blockquote><p>æ‰‡å½¢äº¤æ¢æœºå°±æ˜¯æŠŠæ¶ˆæ¯æŠ•é€’åˆ°<strong>æ‰€æœ‰</strong>ç»‘å®šçš„é˜Ÿåˆ—ä¸Šï¼Œ<strong>æ— éœ€è·¯ç”±key</strong>ï¼Œç›¸å½“äºæ˜¯å¹¿æ’­ã€ç¾¤å‘</p></blockquote><p><img src="https://img-blog.csdnimg.cn/5014bdd869384a4482ce5b486ec01450.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h4 id="_3-1-1-é…ç½®ä»£ç " tabindex="-1"><a class="header-anchor" href="#_3-1-1-é…ç½®ä»£ç " aria-hidden="true">#</a> 3.1.1. é…ç½®ä»£ç </h4><h5 id="_3-1-1-1-åˆ›å»ºæ‰‡å½¢äº¤æ¢æœº" tabindex="-1"><a class="header-anchor" href="#_3-1-1-1-åˆ›å»ºæ‰‡å½¢äº¤æ¢æœº" aria-hidden="true">#</a> 3.1.1.1. åˆ›å»ºæ‰‡å½¢äº¤æ¢æœº</h5><blockquote><p>é€šè¿‡åˆ›å»º<code>FanoutExchange</code>æ¥åˆ›å»ºæ‰‡å½¢äº¤æ¢æœº</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">FanoutExchange</span> <span class="token function">fanoutExchange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">FanoutExchange</span><span class="token punctuation">(</span><span class="token string">&quot;exchange.fanout&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_3-1-1-2-ä¸ºæ‰‡å½¢äº¤æ¢æœºç»‘å®šé˜Ÿåˆ—" tabindex="-1"><a class="header-anchor" href="#_3-1-1-2-ä¸ºæ‰‡å½¢äº¤æ¢æœºç»‘å®šé˜Ÿåˆ—" aria-hidden="true">#</a> 3.1.1.2. ä¸ºæ‰‡å½¢äº¤æ¢æœºç»‘å®šé˜Ÿåˆ—</h5><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">Binding</span> <span class="token function">bindingA</span><span class="token punctuation">(</span><span class="token class-name">FanoutExchange</span> fanoutExchange<span class="token punctuation">,</span> <span class="token class-name">Queue</span> queueA<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// å°†é˜Ÿåˆ—aç»‘å®šåˆ°äº¤æ¢æœº</span>
    <span class="token keyword">return</span> <span class="token class-name">BindingBuilder</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>queueA<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span>fanoutExchange<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-2-ç›´è¿äº¤æ¢æœº-direct-exchange" tabindex="-1"><a class="header-anchor" href="#_3-2-ç›´è¿äº¤æ¢æœº-direct-exchange" aria-hidden="true">#</a> 3.2. ç›´è¿äº¤æ¢æœºï¼ˆDirect Exchangeï¼‰</h3><blockquote><p>ç›´è¿äº¤æ¢æœºåœ¨ç»‘å®šé˜Ÿåˆ—çš„æ—¶å€™éœ€è¦æŒ‡å®šä¸€ä¸ª<code>routingKey</code>è·¯ç”±keyï¼Œåœ¨æ”¶åˆ°æ¶ˆæ¯åï¼Œä¼šè¿›è¡Œ<strong>è·¯ç”±keyçš„åŒ¹é…</strong>ï¼Œåªæœ‰åŒ¹é…æˆåŠŸæ‰ä¼šæŠ•é€’</p><p>æ³¨æ„ï¼šå¤šä¸ªé˜Ÿåˆ—çš„è·¯ç”±keyéƒ½é…å¯¹ä¸Šäº†ï¼Œå°±ä¼šå°†æ¶ˆæ¯åˆ†åˆ«æŠ•é€’åˆ°è¿™äº›é˜Ÿåˆ—é‡Œã€‚ä½†æ˜¯ï¼Œä¸€ä¸ªé˜Ÿåˆ—è¦æ˜¯æœ‰å¤šä¸ªkeyåŒ¹é…ï¼Œåªä¼šæŠ•é€’ä¸€æ¬¡</p></blockquote><p><img src="https://s2.loli.net/2023/10/17/ptAX5Eg2uq7YJOB.jpg" alt="img"></p><h4 id="_3-2-1-é…ç½®äº¤æ¢æœº" tabindex="-1"><a class="header-anchor" href="#_3-2-1-é…ç½®äº¤æ¢æœº" aria-hidden="true">#</a> 3.2.1. é…ç½®äº¤æ¢æœº</h4><h5 id="_3-2-1-1-åˆ›å»ºä¸ç»‘å®š" tabindex="-1"><a class="header-anchor" href="#_3-2-1-1-åˆ›å»ºä¸ç»‘å®š" aria-hidden="true">#</a> 3.2.1.1. åˆ›å»ºä¸ç»‘å®š</h5><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@Setter</span>
<span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;my&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RabbitConfig</span> <span class="token punctuation">{</span>

    <span class="token doc-comment comment">/**
     * 1. å®šä¹‰äº¤æ¢æœº
     * 2. å®šä¹‰é˜Ÿåˆ—
     * 3. ç»‘å®šäº¤æ¢æœºå’Œé˜Ÿåˆ—
     */</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> queueAName<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> queueBName<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> exchangeName<span class="token punctuation">;</span>

    <span class="token doc-comment comment">/**
     * å®šä¹‰äº¤æ¢æœº
     */</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">DirectExchange</span> <span class="token function">directExchange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">ExchangeBuilder</span><span class="token punctuation">.</span><span class="token function">directExchange</span><span class="token punctuation">(</span>exchangeName<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * å®šä¹‰é˜Ÿåˆ—
     */</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Queue</span> <span class="token function">queueA</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">QueueBuilder</span><span class="token punctuation">.</span><span class="token function">durable</span><span class="token punctuation">(</span>queueAName<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Queue</span> <span class="token function">queueB</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">QueueBuilder</span><span class="token punctuation">.</span><span class="token function">durable</span><span class="token punctuation">(</span>queueBName<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * ç»‘å®šäº¤æ¢æœºå’Œé˜Ÿåˆ—
     */</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Binding</span> <span class="token function">bindingA</span><span class="token punctuation">(</span><span class="token class-name">DirectExchange</span> directExchange<span class="token punctuation">,</span> <span class="token class-name">Queue</span> queueA<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// å°†é˜Ÿåˆ—aç»‘å®šåˆ°äº¤æ¢æœº</span>
        <span class="token keyword">return</span> <span class="token class-name">BindingBuilder</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>queueA<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span>directExchange<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">with</span><span class="token punctuation">(</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token doc-comment comment">/**
     * ä¸ºé˜Ÿåˆ—bç»‘å®šä¸åŒçš„è·¯ç”±key
     */</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Binding</span> <span class="token function">bindingB1</span><span class="token punctuation">(</span><span class="token class-name">DirectExchange</span> directExchange<span class="token punctuation">,</span> <span class="token class-name">Queue</span> queueB<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">BindingBuilder</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>queueB<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span>directExchange<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">with</span><span class="token punctuation">(</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Binding</span> <span class="token function">bindingB2</span><span class="token punctuation">(</span><span class="token class-name">DirectExchange</span> directExchange<span class="token punctuation">,</span> <span class="token class-name">Queue</span> queueB<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">BindingBuilder</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>queueB<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span>directExchange<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">with</span><span class="token punctuation">(</span><span class="token string">&quot;info&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Binding</span> <span class="token function">bindingB3</span><span class="token punctuation">(</span><span class="token class-name">DirectExchange</span> directExchange<span class="token punctuation">,</span> <span class="token class-name">Queue</span> queueB<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">BindingBuilder</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>queueB<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span>directExchange<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">with</span><span class="token punctuation">(</span><span class="token string">&quot;warning&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-3-ä¸»é¢˜äº¤æ¢æœº-topic-exchange" tabindex="-1"><a class="header-anchor" href="#_3-3-ä¸»é¢˜äº¤æ¢æœº-topic-exchange" aria-hidden="true">#</a> 3.3. ä¸»é¢˜äº¤æ¢æœºï¼ˆ<strong>Topic Exchange</strong>ï¼‰</h3><blockquote><p>åœ¨ç»‘å®šé˜Ÿåˆ—å’Œäº¤æ¢æœºçš„æ—¶å€™å¯ä»¥æŒ‡å®š<strong>å¸¦é€šé…ç¬¦çš„è·¯ç”±key</strong></p><p>åœ¨å‘é€æ¶ˆæ¯åï¼Œä¼šæ ¹æ®æ¶ˆæ¯çš„è·¯ç”±keyè¿›è¡ŒåŒ¹é…ï¼ŒåŒ¹é…æˆåŠŸå°±ä¼šæŠ•é€’åˆ°å¯¹åº”é˜Ÿåˆ—ä¸­</p></blockquote><h4 id="_3-3-1-é€šé…ç¬¦è§„åˆ™" tabindex="-1"><a class="header-anchor" href="#_3-3-1-é€šé…ç¬¦è§„åˆ™" aria-hidden="true">#</a> 3.3.1. é€šé…ç¬¦è§„åˆ™</h4><blockquote><p>æ³¨æ„ï¼šè§„åˆ™ä¸­æåˆ°çš„<code>å•è¯</code>ï¼Œéƒ½æ˜¯è·¯ç”±keyä¸­ä»¥<code>.</code>åˆ†éš”çš„ä¸ºå•è¯</p></blockquote><ol><li><code>*</code><ul><li><code>*</code>åŒ¹é…ä¸€ä¸ªå•è¯ï¼ˆå¿…é¡»æœ‰ä¸€ä¸ªï¼Œè€Œä¸”åªæœ‰ä¸€ä¸ªï¼‰</li><li>æ¯”å¦‚ï¼š<code>haha.*</code>çš„keyå°±èƒ½æ¥æ”¶<code>haha.a</code>ã€‚<strong>ä¸èƒ½æ¥æ”¶</strong><code>haha</code>ä¹Ÿä¸èƒ½æ¥æ”¶<code>haha.a.b</code></li></ul></li><li><code>#</code><ul><li><code>#</code>åŒ¹é…å¤šä¸ªå•è¯ï¼Œç”¨æ¥è¡¨ç¤ºä»»æ„æ•°é‡ï¼ˆé›¶ä¸ªæˆ–å¤šä¸ªï¼‰å•è¯</li><li>æ¯”å¦‚ï¼š<code>haha.#</code>çš„keyå°±èƒ½æ¥æ”¶<code>haha.a</code>ã€‚<strong>å¯ä»¥æ¥æ”¶</strong><code>haha</code>å’Œ<code>haha.a.b</code></li></ul></li></ol><h4 id="_3-3-2-é…ç½®ä»£ç " tabindex="-1"><a class="header-anchor" href="#_3-3-2-é…ç½®ä»£ç " aria-hidden="true">#</a> 3.3.2. é…ç½®ä»£ç </h4><blockquote><p>ä¸»è¦æ˜¯è·¯ç”±keyçš„é…ç½®åŒºåˆ«</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@Setter</span>
<span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;my&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RabbitConfig</span> <span class="token punctuation">{</span>

    <span class="token doc-comment comment">/**
     * 1. å®šä¹‰äº¤æ¢æœº
     * 2. å®šä¹‰é˜Ÿåˆ—
     * 3. ç»‘å®šäº¤æ¢æœºå’Œé˜Ÿåˆ—
     */</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> queueAName<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> queueBName<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> exchangeName<span class="token punctuation">;</span>

    <span class="token doc-comment comment">/**
     * å®šä¹‰ä¸»é¢˜äº¤æ¢æœº
     */</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">TopicExchange</span> <span class="token function">topicExchange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">ExchangeBuilder</span><span class="token punctuation">.</span><span class="token function">topicExchange</span><span class="token punctuation">(</span>exchangeName<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * å®šä¹‰é˜Ÿåˆ—
     */</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Queue</span> <span class="token function">queueA</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">QueueBuilder</span><span class="token punctuation">.</span><span class="token function">durable</span><span class="token punctuation">(</span>queueAName<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Queue</span> <span class="token function">queueB</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">QueueBuilder</span><span class="token punctuation">.</span><span class="token function">durable</span><span class="token punctuation">(</span>queueBName<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * ç»‘å®šäº¤æ¢æœºå’Œé˜Ÿåˆ—
     */</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Binding</span> <span class="token function">bindingA</span><span class="token punctuation">(</span><span class="token class-name">TopicExchange</span> topicExchange<span class="token punctuation">,</span> <span class="token class-name">Queue</span> queueA<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// å°†é˜Ÿåˆ—aç»‘å®šåˆ°äº¤æ¢æœº</span>
        <span class="token keyword">return</span> <span class="token class-name">BindingBuilder</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>queueA<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span>topicExchange<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">with</span><span class="token punctuation">(</span><span class="token string">&quot;*.orange.*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Binding</span> <span class="token function">bindingB1</span><span class="token punctuation">(</span><span class="token class-name">TopicExchange</span> topicExchange<span class="token punctuation">,</span> <span class="token class-name">Queue</span> queueB<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">BindingBuilder</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>queueB<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span>topicExchange<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">with</span><span class="token punctuation">(</span><span class="token string">&quot;*.*.rabbit&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Binding</span> <span class="token function">bindingB2</span><span class="token punctuation">(</span><span class="token class-name">TopicExchange</span> topicExchange<span class="token punctuation">,</span> <span class="token class-name">Queue</span> queueB<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">BindingBuilder</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>queueB<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span>topicExchange<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">with</span><span class="token punctuation">(</span><span class="token string">&quot;lazy.#&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-4-å¤´äº¤æ¢æœº-headers-exchange" tabindex="-1"><a class="header-anchor" href="#_3-4-å¤´äº¤æ¢æœº-headers-exchange" aria-hidden="true">#</a> 3.4. å¤´äº¤æ¢æœºï¼ˆ<strong>Headers Exchange</strong>ï¼‰</h3><blockquote><p>â€‹ æœ‰æ—¶æ¶ˆæ¯çš„è·¯ç”±æ“ä½œä¼šæ¶‰åŠåˆ°<strong>å¤šä¸ªå±æ€§</strong>ï¼Œæ­¤æ—¶ä½¿ç”¨æ¶ˆæ¯å¤´å°±æ¯”ç”¨è·¯ç”±é”®æ›´å®¹æ˜“è¡¨è¾¾ï¼Œå¤´äº¤æ¢æœºï¼ˆheaders exchangeï¼‰å°±æ˜¯ä¸ºæ­¤è€Œç”Ÿçš„ã€‚å¤´äº¤æ¢æœºä½¿ç”¨å¤šä¸ªæ¶ˆæ¯å±æ€§æ¥ä»£æ›¿è·¯ç”±é”®å»ºç«‹è·¯ç”±è§„åˆ™ã€‚é€šè¿‡åˆ¤æ–­æ¶ˆæ¯å¤´çš„å€¼èƒ½å¦ä¸æŒ‡å®šçš„ç»‘å®šç›¸åŒ¹é…æ¥ç¡®ç«‹è·¯ç”±è§„åˆ™ã€‚</p><p>â€‹ å¤´äº¤æ¢æœºå¯ä»¥è§†ä¸ºç›´è¿äº¤æ¢æœºçš„å¦ä¸€ç§è¡¨ç°å½¢å¼ã€‚å¤´äº¤æ¢æœºèƒ½å¤Ÿåƒç›´è¿äº¤æ¢æœºä¸€æ ·å·¥ä½œï¼Œä¸åŒä¹‹å¤„åœ¨äºå¤´äº¤æ¢æœºçš„è·¯ç”±è§„åˆ™æ˜¯å»ºç«‹åœ¨å¤´å±æ€§å€¼ä¹‹ä¸Šï¼Œè€Œä¸æ˜¯è·¯ç”±é”®ã€‚è·¯ç”±é”®å¿…é¡»æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè€Œå¤´å±æ€§å€¼åˆ™æ²¡æœ‰è¿™ä¸ªçº¦æŸï¼Œå®ƒä»¬ç”šè‡³å¯ä»¥æ˜¯æ•´æ•°æˆ–è€…å“ˆå¸Œå€¼ï¼ˆå­—å…¸ï¼‰ç­‰ã€‚</p><p>â€‹ å¤´äº¤æ¢æœºç”¨çš„æ¯”è¾ƒå°‘ï¼Œäº†è§£ä¸€ä¸‹æ¦‚å¿µå³å¯ã€‚</p></blockquote><h4 id="_3-4-1-é…ç½®ä»£ç " tabindex="-1"><a class="header-anchor" href="#_3-4-1-é…ç½®ä»£ç " aria-hidden="true">#</a> 3.4.1. é…ç½®ä»£ç </h4><h5 id="_3-4-1-1-åˆ›å»ºäº¤æ¢æœºå’Œé˜Ÿåˆ—" tabindex="-1"><a class="header-anchor" href="#_3-4-1-1-åˆ›å»ºäº¤æ¢æœºå’Œé˜Ÿåˆ—" aria-hidden="true">#</a> 3.4.1.1. åˆ›å»ºäº¤æ¢æœºå’Œé˜Ÿåˆ—</h5><blockquote><p>æ»¡è¶³æ¡ä»¶ï¼Œè€Œå½“&quot;x-match&quot;è®¾ç½®ä¸ºâ€œallâ€çš„æ—¶å€™ï¼Œå°±éœ€è¦æ¶ˆæ¯å¤´çš„æ‰€æœ‰å€¼éƒ½åŒ¹é…æˆåŠŸã€‚</p><p>åœ¨ç»‘å®šäº¤æ¢æœºå’Œé˜Ÿåˆ—çš„æ—¶å€™ï¼Œå¯ä»¥ç¡®å®šå¤´å±æ€§æ˜¯éœ€è¦æ¶ˆæ¯<strong>å®Œå…¨åŒ¹é…all</strong>è¿˜æ˜¯<strong>ä»»ä¸€åŒ¹é…any</strong>ã€‚</p><ul><li>å¦‚æœæ˜¯å®Œå…¨åŒ¹é…ï¼šæ¶ˆæ¯å¤´å°±éœ€è¦æ‰€æœ‰å€¼å®Œå…¨åŒ¹é…</li><li>å¦‚æœæ˜¯ä»»ä¸€åŒ¹é…ï¼šæ¶ˆæ¯å¤´åªè¦èƒ½åŒ¹é…åˆ°ä»»æ„ä¸€ä¸ªå€¼å°±æ»¡è¶³æ¡ä»¶</li></ul></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * ç»‘å®šäº¤æ¢æœºå’Œé˜Ÿåˆ—
 */</span>
<span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">Binding</span> <span class="token function">bindingA</span><span class="token punctuation">(</span><span class="token class-name">HeadersExchange</span> headersExchange<span class="token punctuation">,</span> <span class="token class-name">Queue</span> queueA<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> headerValues <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    headerValues<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;type&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;m&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    headerValues<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;status&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// å°†é˜Ÿåˆ—aç»‘å®šåˆ°äº¤æ¢æœº</span>
    <span class="token keyword">return</span> <span class="token class-name">BindingBuilder</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>queueA<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span>headersExchange<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">whereAll</span><span class="token punctuation">(</span>headerValues<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">Binding</span> <span class="token function">bindingB</span><span class="token punctuation">(</span><span class="token class-name">HeadersExchange</span> headersExchange<span class="token punctuation">,</span> <span class="token class-name">Queue</span> queueB<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> headerValues <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    headerValues<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;type&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;s&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    headerValues<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;status&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// å°†é˜Ÿåˆ—bç»‘å®šåˆ°äº¤æ¢æœº</span>
    <span class="token keyword">return</span> <span class="token class-name">BindingBuilder</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>queueB<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span>headersExchange<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">whereAll</span><span class="token punctuation">(</span>headerValues<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_3-4-1-2-å‘é€æ¶ˆæ¯" tabindex="-1"><a class="header-anchor" href="#_3-4-1-2-å‘é€æ¶ˆæ¯" aria-hidden="true">#</a> 3.4.1.2. å‘é€æ¶ˆæ¯</h5><blockquote><p>ç»™æ¶ˆæ¯åŠ ä¸Š<code>æ¶ˆæ¯å±æ€§</code>ï¼Œåœ¨æ¶ˆæ¯å±æ€§é‡Œé¢æŒ‡å®šä¸Š<code>æ¶ˆæ¯å¤´</code></p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MsgService</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">RabbitTemplate</span> rabbitTemplate<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;${my.exchangeName}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> exchangeName<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;${my.routingKey}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> routingKey<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sendMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// æ¶ˆæ¯å±æ€§</span>
        <span class="token class-name">MessageProperties</span> messageProperties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MessageProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> headers <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        headers<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;type&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;s&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        headers<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;status&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// è®¾ç½®æ¶ˆæ¯å¤´</span>
        messageProperties<span class="token punctuation">.</span><span class="token function">setHeaders</span><span class="token punctuation">(</span>headers<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// æ¶ˆæ¯å¸¦ä¸Šæ¶ˆæ¯å±æ€§</span>
        <span class="token class-name">Message</span> msg <span class="token operator">=</span> <span class="token class-name">MessageBuilder</span><span class="token punctuation">.</span><span class="token function">withBody</span><span class="token punctuation">(</span><span class="token string">&quot;Hello world!!!&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">andProperties</span><span class="token punctuation">(</span>messageProperties<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        rabbitTemplate<span class="token punctuation">.</span><span class="token function">convertAndSend</span><span class="token punctuation">(</span>exchangeName<span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;æ¶ˆæ¯å‘é€å®Œæ¯•ï¼Œå‘é€æ—¶é—´ä¸ºï¼š{}ï¼Œäº¤æ¢æœºä¸ºï¼š{}&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> exchangeName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-ttl" tabindex="-1"><a class="header-anchor" href="#_4-ttl" aria-hidden="true">#</a> 4. TTL</h2><blockquote><p>TTLï¼š<code>Time To Live</code>ï¼Œæ¶ˆæ¯è¿‡æœŸæ—¶é—´</p></blockquote><h3 id="_4-1-ç»™é˜Ÿåˆ—è®¾ç½®ttl" tabindex="-1"><a class="header-anchor" href="#_4-1-ç»™é˜Ÿåˆ—è®¾ç½®ttl" aria-hidden="true">#</a> 4.1. ç»™é˜Ÿåˆ—è®¾ç½®TTL</h3><blockquote><ul><li><p>ç›¸å½“äºé˜Ÿåˆ—çš„æ‰€æœ‰æ¶ˆæ¯éƒ½å¸¦äº†TTLï¼Œä¸è¿‡ï¼Œå¦‚æœæ¶ˆæ¯æœ¬èº«TTL<strong>å°äºé˜Ÿåˆ—TTL</strong>çš„è¯ï¼Œ<strong>ä»¥å°çš„ä¸ºä¸»</strong></p></li><li><p>é…ç½®çš„æ—¶å€™å•ä½æ˜¯<strong>æ¯«ç§’</strong></p></li><li><p>å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼æ¥æ·»åŠ é˜Ÿåˆ—é…ç½®ï¼Œä¸€ç§æ˜¯<code>new</code>ï¼Œä¸€ç§æ˜¯<code>å»ºé€ è€…æ¨¡å¼</code>ã€‚ä¸ªäººæ›´å–œæ¬¢å»ºé€ è€…æ¨¡å¼ï¼ˆç®€å•ï¼‰ï¼Œé˜Ÿåˆ—é…ç½®ä¼šåœ¨åç»­ç« èŠ‚ä»‹ç»ã€‚</p></li></ul></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * å®šä¹‰é˜Ÿåˆ—ï¼Œè®¾ç½®ä¸ºé˜Ÿåˆ—å±æ€§æ·»åŠ æ¶ˆæ¯è¿‡æœŸæ—¶é—´
 */</span>
<span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">Queue</span> <span class="token function">queue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// æ–¹å¼1ï¼šnew Queue</span>
    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> arguments <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// è®¾ç½®é˜Ÿåˆ—æ¶ˆæ¯è¿‡æœŸæ—¶é—´</span>
    arguments<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;x-message-ttl&quot;</span><span class="token punctuation">,</span> <span class="token number">15000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// return new Queue(queueName, true, false, false, arguments);</span>

    <span class="token comment">// æ–¹å¼2ï¼šå»ºé€ è€…æ¨¡å¼</span>
    <span class="token keyword">return</span> <span class="token class-name">QueueBuilder</span><span class="token punctuation">.</span><span class="token function">durable</span><span class="token punctuation">(</span>queueName<span class="token punctuation">)</span>
        <span class="token comment">// é€šè¿‡å»ºé€ è€…æ¨¡å¼è®¾ç½®è¿‡æœŸæ—¶é—´</span>
        <span class="token comment">// .ttl(15000)</span>
        <span class="token punctuation">.</span><span class="token function">withArguments</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-2-ç»™å•æ¡æ¶ˆæ¯è®¾ç½®ttl" tabindex="-1"><a class="header-anchor" href="#_4-2-ç»™å•æ¡æ¶ˆæ¯è®¾ç½®ttl" aria-hidden="true">#</a> 4.2. ç»™å•æ¡æ¶ˆæ¯è®¾ç½®TTL</h3><blockquote><p>é€šè¿‡æ¶ˆæ¯å±æ€§<code>MessageProperties</code>æ¥æ·»åŠ æ¶ˆæ¯çš„é…ç½®ï¼Œå…·ä½“æ¶ˆæ¯å±æ€§é…ç½®ä¼šåœ¨åé¢ç« èŠ‚ä»‹ç»ã€‚</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sendMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">MessageProperties</span> messageProperties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MessageProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œæ¯«ç§’æ•°çš„å­—ç¬¦ä¸²ï¼Œè¿™é‡Œæ˜¯30s</span>
    messageProperties<span class="token punctuation">.</span><span class="token function">setExpiration</span><span class="token punctuation">(</span><span class="token string">&quot;30000&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Message</span> msg <span class="token operator">=</span> <span class="token class-name">MessageBuilder</span>
        <span class="token punctuation">.</span><span class="token function">withBody</span><span class="token punctuation">(</span><span class="token string">&quot;Hello world!!!&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">andProperties</span><span class="token punctuation">(</span>messageProperties<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    rabbitTemplate<span class="token punctuation">.</span><span class="token function">convertAndSend</span><span class="token punctuation">(</span>exchangeName<span class="token punctuation">,</span> <span class="token string">&quot;info&quot;</span><span class="token punctuation">,</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;æ¶ˆæ¯å‘é€å®Œæ¯•ï¼Œå‘é€æ—¶é—´ä¸ºï¼š{}ï¼Œäº¤æ¢æœºä¸ºï¼š{}&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> exchangeName<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5-ğŸ”´æ­»ä¿¡é˜Ÿåˆ—" tabindex="-1"><a class="header-anchor" href="#_5-ğŸ”´æ­»ä¿¡é˜Ÿåˆ—" aria-hidden="true">#</a> 5. ğŸ”´æ­»ä¿¡é˜Ÿåˆ—</h2><h3 id="_5-1-æ˜¯ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#_5-1-æ˜¯ä»€ä¹ˆ" aria-hidden="true">#</a> 5.1. æ˜¯ä»€ä¹ˆ</h3><p>æ­»ä¿¡é˜Ÿåˆ—å…¶å®æ˜¯<strong>æ­»ä¿¡äº¤æ¢æœº</strong>å’Œ<strong>æ­»ä¿¡é˜Ÿåˆ—</strong>ç»„æˆçš„ã€‚</p><p><strong>æ­»ä¿¡äº¤æ¢æœº</strong>å’Œ<strong>æ­»ä¿¡é˜Ÿåˆ—</strong>å…¶å®ä¹Ÿ<code>å°±æ˜¯æ™®é€šçš„äº¤æ¢æœºå’Œé˜Ÿåˆ—</code>ï¼Œåªæ˜¯ç¨‹åºå‘˜è®©å®ƒä»¬æ¥æ”¶çš„æ¶ˆæ¯ä¸å¤ªä¸€æ ·ï¼Œä¸»è¦å°±æ˜¯ç”¨æ¥å¤„ç†<strong>æ­»ä¿¡</strong>ã€‚</p><p>å‡ºç°ä»¥ä¸‹ç‰¹æ®Šæƒ…å†µçš„æ¶ˆæ¯æ‰ä¼šç®—ä½œ<code>æ­»ä¿¡</code>ï¼Œæ­»ä¿¡äº¤æ¢æœºä¸»è¦å°±æ˜¯ä¸ºäº†æ¥æ”¶è¿™äº›æ­»ä¿¡ï¼Œæ”¾å…¥æ­»ä¿¡é˜Ÿåˆ—ä¸­ï¼Œç¨‹åºç›‘å¬æ­»ä¿¡é˜Ÿåˆ—ï¼Œå¦‚æœæ¥æ”¶åˆ°æ¶ˆæ¯äº†è¯´æ˜ç¨‹åºå‡ºç°äº†ä¸€äº›é—®é¢˜ï¼Œè¿™æ—¶å€™å°±è¦é€šçŸ¥å¼€å‘äººå‘˜æŸ¥çœ‹äº†ã€‚</p><h3 id="_5-2-è®©æ¶ˆæ¯å˜ä¸ºæ­»ä¿¡çš„ç‰¹æ®Šæƒ…å†µ" tabindex="-1"><a class="header-anchor" href="#_5-2-è®©æ¶ˆæ¯å˜ä¸ºæ­»ä¿¡çš„ç‰¹æ®Šæƒ…å†µ" aria-hidden="true">#</a> 5.2. è®©æ¶ˆæ¯å˜ä¸ºæ­»ä¿¡çš„ç‰¹æ®Šæƒ…å†µ</h3><p>å‡ºç°ä»¥ä¸‹ç‰¹æ®Šæƒ…å†µï¼Œä¼šè®¤ä¸ºæ¶ˆæ¯æ˜¯æ­»ä¿¡ï¼ˆæ²¡äººè¦çš„æ¶ˆæ¯ï¼‰</p><ol><li>æ¶ˆæ¯è¿‡æœŸï¼ˆTTLï¼‰ <ul><li>åŒ…æ‹¬ <strong>æ¶ˆæ¯è‡ªèº«TTL</strong> æˆ–è€… <strong>é˜Ÿåˆ—TTL</strong></li></ul></li><li>æ­£å¸¸äº¤æ¢æœºè®¾ç½®äº†<strong>æœ€å¤§é•¿åº¦</strong>ï¼ˆåŒ…æ‹¬æ¶ˆæ¯byteé™åˆ¶å’Œæ¶ˆæ¯æ•°é‡é™åˆ¶ï¼‰ <ul><li>è¶…è¿‡ä¹‹åå¦‚æœè®¾ç½®äº†æ­»ä¿¡äº¤æ¢æœºï¼Œä¼šå°†æ¶ˆæ¯æ”¾åˆ°æ­»ä¿¡äº¤æ¢æœº</li><li>è¶…è¿‡ä¹‹åå¦‚æœæ²¡æœ‰è®¾ç½®æ­»ä¿¡äº¤æ¢æœºï¼Œæ¶ˆæ¯å°±è¢«æ‰”äº†</li></ul></li><li>æ¶ˆè´¹è€…æ‰‹åŠ¨ç¡®è®¤æ¶ˆæ¯çš„æ¨¡å¼ä¸‹ï¼Œæ¶ˆæ¯è¢«æ¶ˆè´¹è€…æ‹’ç»ä¸”æ²¡æœ‰é‡æ–°å…¥é˜Ÿ</li></ol><h3 id="_5-3-ç»™é˜Ÿåˆ—é…ç½®æ­»ä¿¡äº¤æ¢æœº" tabindex="-1"><a class="header-anchor" href="#_5-3-ç»™é˜Ÿåˆ—é…ç½®æ­»ä¿¡äº¤æ¢æœº" aria-hidden="true">#</a> 5.3. ç»™é˜Ÿåˆ—é…ç½®æ­»ä¿¡äº¤æ¢æœº</h3><p>åªæœ‰å½“ç»™é˜Ÿåˆ—é…ç½®äº†æ­»ä¿¡äº¤æ¢æœºï¼ŒåŒæ—¶å£°æ˜äº†æ­»ä¿¡äº¤æ¢æœºå’Œæ­»ä¿¡é˜Ÿåˆ—ï¼Œå¹¶ç»‘å®šå®ƒä»¬çš„å…³ç³»ï¼Œæ‰èƒ½è®©æ¶ˆæ¯å‡ºç°ç‰¹æ®Šæƒ…å†µæ—¶æŠ•é€’åˆ°æ­»ä¿¡äº¤æ¢æœº</p><ul><li>è®¾ç½®æ­»ä¿¡äº¤æ¢æœºæ—¶è¦æŒ‡å®šæ­»ä¿¡äº¤æ¢æœºåå­—</li><li>åŒæ—¶å¦‚æœæ­»ä¿¡äº¤æ¢æœºæ˜¯ç›´è¿çš„ï¼Œå°±éœ€è¦æŒ‡å®šè·¯ç”±åˆ°æ­»ä¿¡é˜Ÿåˆ—çš„è·¯ç”±key</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">Queue</span> <span class="token function">queueNormal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> arguments <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// è®¾ç½®ttl</span>
    arguments<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;x-message-ttl&quot;</span><span class="token punctuation">,</span> <span class="token number">15000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// å…³é”®ï¼šè®¾ç½®æ­»ä¿¡äº¤æ¢æœº</span>
    arguments<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;x-dead-letter-exchange&quot;</span><span class="token punctuation">,</span> exchangeDeadName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// å…³é”®ï¼šè®¾ç½®æ­»ä¿¡äº¤æ¢æœºè·¯ç”±keyã€‚å› ä¸ºå½“å‰æ­»ä¿¡äº¤æ¢æœºæ˜¯ç›´è¿çš„ï¼Œæ‰€ä»¥è¦åˆ¶å®šæ­»ä¿¡äº¤æ¢æœºå’Œæ­»ä¿¡é˜Ÿåˆ—çš„routingKey</span>
    arguments<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;x-dead-letter-routing-key&quot;</span><span class="token punctuation">,</span> deadRoutingKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token class-name">QueueBuilder</span>
        <span class="token punctuation">.</span><span class="token function">durable</span><span class="token punctuation">(</span>queueNormalName<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">withArguments</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-4-ttlæ­»ä¿¡" tabindex="-1"><a class="header-anchor" href="#_5-4-ttlæ­»ä¿¡" aria-hidden="true">#</a> 5.4. TTLæ­»ä¿¡</h3><p>åŒå‰ä¸€èŠ‚TTLé…ç½®</p><h3 id="_5-5-æœ€å¤§é•¿åº¦å¯¼è‡´æ­»ä¿¡" tabindex="-1"><a class="header-anchor" href="#_5-5-æœ€å¤§é•¿åº¦å¯¼è‡´æ­»ä¿¡" aria-hidden="true">#</a> 5.5. æœ€å¤§é•¿åº¦å¯¼è‡´æ­»ä¿¡</h3><p>ç»™é˜Ÿåˆ—è®¾ç½®æœ€å¤§é•¿åº¦ï¼Œå½“è¶…å‡ºåå°±ä¼šå°†å¤´éƒ¨ï¼ˆé»˜è®¤ï¼‰æ¶ˆæ¯æ‰”åˆ°æ­»ä¿¡äº¤æ¢æœº</p><h3 id="_5-6-æ¶ˆè´¹è€…æ‰‹åŠ¨ç¡®è®¤æ¨¡å¼æ‹’ç»æ¶ˆæ¯" tabindex="-1"><a class="header-anchor" href="#_5-6-æ¶ˆè´¹è€…æ‰‹åŠ¨ç¡®è®¤æ¨¡å¼æ‹’ç»æ¶ˆæ¯" aria-hidden="true">#</a> 5.6. æ¶ˆè´¹è€…æ‰‹åŠ¨ç¡®è®¤æ¨¡å¼æ‹’ç»æ¶ˆæ¯</h3><h4 id="_5-6-1-é…ç½®æ–‡ä»¶ä¸­å¼€å¯æ¶ˆè´¹è€…æ‰‹åŠ¨ç¡®è®¤æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#_5-6-1-é…ç½®æ–‡ä»¶ä¸­å¼€å¯æ¶ˆè´¹è€…æ‰‹åŠ¨ç¡®è®¤æ¨¡å¼" aria-hidden="true">#</a> 5.6.1. é…ç½®æ–‡ä»¶ä¸­å¼€å¯æ¶ˆè´¹è€…æ‰‹åŠ¨ç¡®è®¤æ¨¡å¼</h4><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">rabbitmq</span><span class="token punctuation">:</span>
<span class="token key atrule">host</span><span class="token punctuation">:</span> RabbitMQip
<span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">5672</span>
<span class="token key atrule">username</span><span class="token punctuation">:</span> ç”¨æˆ·å
<span class="token key atrule">password</span><span class="token punctuation">:</span> å¯†ç 
<span class="token key atrule">virtual-host</span><span class="token punctuation">:</span> è™šæ‹Ÿä¸»æœºåå­—
<span class="token key atrule">listener</span><span class="token punctuation">:</span>
  <span class="token key atrule">simple</span><span class="token punctuation">:</span>
    <span class="token comment"># æ¶ˆè´¹è€…æ‰‹åŠ¨ç¡®è®¤</span>
    <span class="token key atrule">acknowledge-mode</span><span class="token punctuation">:</span> manual
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_5-6-2-æ¥æ”¶æ¶ˆæ¯-æ‹’ç»ä¸”ä¸é‡å…¥é˜Ÿ" tabindex="-1"><a class="header-anchor" href="#_5-6-2-æ¥æ”¶æ¶ˆæ¯-æ‹’ç»ä¸”ä¸é‡å…¥é˜Ÿ" aria-hidden="true">#</a> 5.6.2. æ¥æ”¶æ¶ˆæ¯ï¼Œæ‹’ç»ä¸”ä¸é‡å…¥é˜Ÿ</h4><p>æ¶ˆè´¹è€…ç›‘å¬æ™®é€šé˜Ÿåˆ—ï¼Œæ¥æ”¶æ¶ˆæ¯åæ¨¡æ‹Ÿå¼‚å¸¸ï¼Œå‘ç”Ÿå¼‚å¸¸åå°±å¾—<strong>æ‹’ç»æ¥æ”¶æ¶ˆæ¯</strong>äº†ï¼ˆå¦‚æœå‘Šè¯‰é˜Ÿåˆ—ç¡®è®¤æ¥æ”¶äº†ï¼Œé˜Ÿåˆ—ä¼šåˆ æ‰æ¶ˆæ¯ï¼‰ï¼Œæ‹’ç»å<strong>ä¸é‡æŠ•æ¶ˆæ¯</strong>ï¼Œæ¶ˆæ¯å°±ä¼šè¿›å…¥æ­»ä¿¡é˜Ÿåˆ—äº†ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * ç›‘å¬æ­£å¸¸çš„é‚£ä¸ªé˜Ÿåˆ—çš„åå­—ï¼Œä¸æ˜¯ç›‘å¬é‚£ä¸ªæ­»ä¿¡é˜Ÿåˆ—
 * channel æ¶ˆæ¯ä¿¡é“ï¼ˆæ˜¯è¿æ¥ä¸‹çš„ä¸€ä¸ªæ¶ˆæ¯ä¿¡é“ï¼Œä¸€ä¸ªè¿æ¥ä¸‹æœ‰å¤šä¸ªæ¶ˆæ¯ä¿¡æ¯ï¼Œå‘æ¶ˆæ¯/æ¥æ¶ˆæ¯éƒ½æ˜¯é€šè¿‡ä¿¡é“å®Œæˆçš„ï¼‰
 */</span>
<span class="token annotation punctuation">@RabbitListener</span><span class="token punctuation">(</span>queues <span class="token operator">=</span> <span class="token string">&quot;æ™®é€šé˜Ÿåˆ—åå­—&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getMsg</span><span class="token punctuation">(</span><span class="token class-name">Message</span> message<span class="token punctuation">,</span> <span class="token class-name">Channel</span> channel<span class="token punctuation">)</span>  <span class="token punctuation">{</span>
    <span class="token comment">// è·å¾—æ¶ˆæ¯å±æ€§</span>
    <span class="token class-name">MessageProperties</span> messageProperties <span class="token operator">=</span> message<span class="token punctuation">.</span><span class="token function">getMessageProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// æ‹¿åˆ°æ¶ˆæ¯å”¯ä¸€id</span>
    <span class="token keyword">long</span> deliveryTag <span class="token operator">=</span> messageProperties<span class="token punctuation">.</span><span class="token function">getDeliveryTag</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> body <span class="token operator">=</span> message<span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;æ—¶é—´ï¼š{}ï¼Œè·å¾—æ¶ˆæ¯ï¼š{}&quot;</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// æ¨¡æ‹Ÿæ‰§è¡Œä¸šåŠ¡é€»è¾‘çš„æ—¶å€™é‡åˆ°å¼‚å¸¸äº†</span>
        <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">/</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token comment">// å¦‚æœæ— å¼‚å¸¸ï¼Œé€šè¿‡ä¿¡é“é€šçŸ¥é˜Ÿåˆ—ï¼Œç¡®è®¤æ”¶åˆ°</span>
        <span class="token comment">// multipleè‹¥ä¸ºtrueä»£è¡¨ä¹‹å‰çš„æ¶ˆæ¯å…¨éƒ½ç¡®è®¤ï¼Œä¸ºfalseåªç¡®è®¤å½“å‰æ¶ˆæ¯</span>
        channel<span class="token punctuation">.</span><span class="token function">basicAck</span><span class="token punctuation">(</span>deliveryTag<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;æ¥æ”¶å¤±è´¥ï¼ŒåŸå› ï¼š{}&quot;</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// requeue â€“ true if the rejected message(s) should be requeued rather than discarded/dead-lettered</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">// æ¶ˆè´¹è€…æ‰‹åŠ¨ä¸ç¡®è®¤ï¼Œä¸é‡æ–°æŠ•é€’ï¼ˆä¸é‡æ–°å…¥é˜Ÿï¼‰</span>
            <span class="token comment">// channel.basicNack(deliveryTag, false, false);</span>
            <span class="token comment">// é‡ç‚¹ï¼šæ‹’ç»ä¸”ä¸é‡æ–°å…¥é˜Ÿï¼ˆä¼šè¿›å…¥æ­»ä¿¡é˜Ÿåˆ—ï¼‰(å’Œä¸Šé¢çš„åŒºåˆ«æ˜¯ï¼ŒbasicNackç¬¬äºŒä¸ªå‚æ•°å¯ä»¥æ‰¹é‡å¤„ç†ï¼‰</span>
            channel<span class="token punctuation">.</span><span class="token function">basicReject</span><span class="token punctuation">(</span>deliveryTag<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>ex<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_6-ğŸ”´å»¶è¿Ÿé˜Ÿåˆ—" tabindex="-1"><a class="header-anchor" href="#_6-ğŸ”´å»¶è¿Ÿé˜Ÿåˆ—" aria-hidden="true">#</a> 6. ğŸ”´å»¶è¿Ÿé˜Ÿåˆ—</h2><h3 id="_6-1-æ˜¯ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#_6-1-æ˜¯ä»€ä¹ˆ" aria-hidden="true">#</a> 6.1. æ˜¯ä»€ä¹ˆ</h3><p>RabbitMQä¸­çš„å»¶è¿Ÿé˜Ÿåˆ—å¯ä»¥ç”¨äºåœ¨ä¸€å®šæ—¶é—´åæ‰å¤„ç†æ¶ˆæ¯ï¼Œé€šå¸¸ç”¨äºå¤„ç†ä¸€äº›<code>éœ€è¦å»¶è¿Ÿæ‰§è¡Œçš„ä»»åŠ¡</code>ï¼Œä¾‹å¦‚å®šæ—¶ä»»åŠ¡ã€å»¶è¿Ÿæ¶ˆæ¯å‘é€ç­‰ã€‚</p><p>å…·ä½“æ¥è¯´ï¼Œå½“ç”Ÿäº§è€…å‘é€ä¸€æ¡æ¶ˆæ¯åˆ°å»¶è¿Ÿé˜Ÿåˆ—æ—¶ï¼Œå¯ä»¥è®¾ç½®æ¶ˆæ¯çš„è¿‡æœŸæ—¶é—´ï¼ˆTTLï¼‰ï¼Œç„¶åå°†æ¶ˆæ¯å‘é€åˆ°å»¶è¿Ÿé˜Ÿåˆ—ï¼ˆæ­»ä¿¡é˜Ÿåˆ—ï¼‰ä¸­ã€‚å½“æ¶ˆæ¯è¿‡æœŸåï¼ŒRabbitMQä¼šå°†æ¶ˆæ¯è½¬å‘åˆ°æŒ‡å®šçš„ç›®æ ‡é˜Ÿåˆ—ä¸­ï¼Œä»è€Œå®ç°å»¶è¿Ÿæ‰§è¡Œçš„æ•ˆæœã€‚</p><h3 id="_6-2-ttl-dlxç»„åˆå®ç°å»¶è¿Ÿé˜Ÿåˆ—" tabindex="-1"><a class="header-anchor" href="#_6-2-ttl-dlxç»„åˆå®ç°å»¶è¿Ÿé˜Ÿåˆ—" aria-hidden="true">#</a> 6.2. TTL+DLXç»„åˆå®ç°å»¶è¿Ÿé˜Ÿåˆ—</h3><p><img src="https://s2.loli.net/2023/10/17/ECThZMdt4Fe9pIX.jpg" alt="img"></p><p>ä¸€èˆ¬æ¥è¯´ï¼Œå»¶è¿Ÿé˜Ÿåˆ—éœ€è¦ä½¿ç”¨TTLï¼ˆTime To Liveï¼‰å’ŒDLXï¼ˆDead Letter Exchangeï¼‰æ¥å®ç°ã€‚</p><ul><li>TTLç”¨äºè®¾ç½®æ¶ˆæ¯çš„è¿‡æœŸæ—¶é—´ï¼Œåœ¨æ¶ˆæ¯åˆ°è¾¾é˜Ÿåˆ—åï¼Œç»è¿‡æŒ‡å®šTTLè¿˜æ²¡è¢«æ¶ˆè´¹è€…å–å‡ºï¼Œå°±ä¼šè¿‡æœŸï¼Œæ­¤æ—¶å°†æ¶ˆæ¯è½¬å‘åˆ°æ­»ä¿¡äº¤æ¢æœºDLXä¸­ã€‚</li><li>DLXç”¨äºæ¥æ”¶è¢«ä¸¢å¼ƒæˆ–è€…è¿‡æœŸçš„æ¶ˆæ¯ï¼Œå¹¶å°†å…¶è½¬å‘åˆ°æŒ‡å®šçš„ç›®æ ‡é˜Ÿåˆ—ä¸­ã€‚</li><li>æ¶ˆè´¹è€…ä»å¯¹åº”é˜Ÿåˆ—å–å‡ºæ¶ˆæ¯ï¼Œå°±å®ç°äº†å»¶è¿Ÿé˜Ÿåˆ—çš„åŠŸèƒ½</li></ul><p>å› æ­¤ï¼Œä½¿ç”¨TTLå’ŒDLXå¯ä»¥å®ç°å»¶è¿Ÿé˜Ÿåˆ—çš„åŠŸèƒ½ï¼Œå¹¶ä¸”å¯ä»¥ä¿è¯æ¶ˆæ¯çš„å¯é ä¼ è¾“ã€‚</p><h3 id="_6-3-å»¶è¿Ÿé˜Ÿåˆ—é—®é¢˜-ttlä¸ä¸€è‡´é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#_6-3-å»¶è¿Ÿé˜Ÿåˆ—é—®é¢˜-ttlä¸ä¸€è‡´é—®é¢˜" aria-hidden="true">#</a> 6.3. å»¶è¿Ÿé˜Ÿåˆ—é—®é¢˜ï¼šTTLä¸ä¸€è‡´é—®é¢˜</h3><p>åä¸€æ¡æ¶ˆæ¯å…ˆè¿‡æœŸä½†æ˜¯è¢«å‰ä¸€æ¡è¿˜æ²¡è¿‡æœŸçš„æ¶ˆæ¯æŒ¡ä½ï¼šå¦‚æœæœ‰ä¸¤æ¡ä¸ä¸€æ ·TTLçš„æ¶ˆæ¯è¿›å…¥é˜Ÿåˆ—ï¼Œåä¸€æ¡æ¯”å‰ä¸€æ¡<strong>å…ˆè¿‡æœŸ</strong>ï¼Œå°±ä¼šå‡ºç°æœ¬æ¥åä¸€æ¡è¦è¿‡æœŸçš„ï¼Œä½†æ˜¯å¾—ç­‰å‰ä¸€æ¡å…ˆå‡ºé˜Ÿåä¸€æ¡æ‰èƒ½å‡ºæ¥ã€‚</p><h4 id="_6-3-1-è§£å†³æ–¹å¼-åˆ†æ•£é˜Ÿåˆ—" tabindex="-1"><a class="header-anchor" href="#_6-3-1-è§£å†³æ–¹å¼-åˆ†æ•£é˜Ÿåˆ—" aria-hidden="true">#</a> 6.3.1. è§£å†³æ–¹å¼ï¼šåˆ†æ•£é˜Ÿåˆ—</h4><p>é€šè¿‡æŠŠä¸åŒTTLçš„æ¶ˆæ¯æŠ•é€’åˆ°ä¸åŒçš„é˜Ÿåˆ—ä¸­ï¼Œè®©é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ä¸ä¼šè¢«é˜»æŒ¡</p><p><img src="https://s2.loli.net/2023/10/17/pWrJsqUoK3Z45Bf.jpg" alt="img"></p><h3 id="_6-4-æ’ä»¶å®ç°å»¶è¿Ÿé˜Ÿåˆ—" tabindex="-1"><a class="header-anchor" href="#_6-4-æ’ä»¶å®ç°å»¶è¿Ÿé˜Ÿåˆ—" aria-hidden="true">#</a> 6.4. æ’ä»¶å®ç°å»¶è¿Ÿé˜Ÿåˆ—</h3><p><img src="https://s2.loli.net/2023/10/17/IW8dlRGaF4ctP5h.jpg" alt="img"></p><p>å»¶è¿Ÿé˜Ÿåˆ—é…ç½®ç›¸å¯¹éº»çƒ¦ï¼ˆå’Œæ­»ä¿¡é˜Ÿåˆ—é…ç½®ç±»ä¼¼ï¼Œéœ€è¦å®šä¹‰é¢å¤–é˜Ÿåˆ—ç”¨æ¥æ¥æ”¶è¿‡æœŸçš„æ¶ˆæ¯ï¼‰ï¼Œå€ŸåŠ©<code>rabbitmq_delayed_message_exchange</code>æ’ä»¶ï¼Œåªéœ€è¦åˆ›å»ºè‡ªå®šä¹‰çš„å»¶è¿Ÿäº¤æ¢æœºï¼Œç»™è¿™ä¸ªäº¤æ¢æœºæ·»åŠ <code>x-delayed-typeå‚æ•°</code>ï¼Œç”¨äºæŒ‡å®šå®ƒçš„ç±»å‹ã€‚</p><p>å½“æ¶ˆæ¯åˆ°è¾¾è¿™ä¸ªäº¤æ¢æœºæ—¶ï¼Œä¸”æ¶ˆæ¯çš„æ¶ˆæ¯å±æ€§ä¸­æŒ‡å®šäº†<code>x-dealy</code>ï¼Œå°±ä¼šåœ¨åˆ°æœŸåè¢«æŠ•é€’åˆ°æŒ‡å®šç›®æ ‡é˜Ÿåˆ—ä¸­ï¼Œå®ç°å»¶è¿Ÿé˜Ÿåˆ—çš„æ•ˆæœï¼ˆåŒæ—¶ä¹Ÿè§£å†³äº†æ¶ˆæ¯TTLä¸ä¸€è‡´çš„é—®é¢˜ï¼‰</p><h4 id="_6-4-1-ä¸‹è½½å®‰è£…æ’ä»¶" tabindex="-1"><a class="header-anchor" href="#_6-4-1-ä¸‹è½½å®‰è£…æ’ä»¶" aria-hidden="true">#</a> 6.4.1. ä¸‹è½½å®‰è£…æ’ä»¶</h4><ol><li>æ‰¾åˆ°å¯¹åº”ç‰ˆæœ¬ä¸‹è½½ï¼šhttp://www.rabbitmq.com/community-plugins.html</li><li>å°†æ’ä»¶æ‹·è´åˆ°RabbitMQæœåŠ¡å™¨çš„<code>plugins</code>ç›®å½•å†…</li><li>è§£å‹æ’ä»¶</li><li>å¯ç”¨æ’ä»¶ï¼š<code>./rabbitmq-plugins enable rabbitmq_delayed_message_exchange</code></li><li>æŸ¥çœ‹æ˜¯å¦å®‰è£…ï¼š<code>./rabbitmq-plugins list</code></li></ol><h4 id="_6-4-2-æ’ä»¶åŸç†" tabindex="-1"><a class="header-anchor" href="#_6-4-2-æ’ä»¶åŸç†" aria-hidden="true">#</a> 6.4.2. æ’ä»¶åŸç†</h4><p>æ¶ˆæ¯å‘é€åä¸ä¼šç›´æ¥æŠ•é€’åˆ°é˜Ÿåˆ—ï¼Œ</p><p>è€Œæ˜¯å­˜å‚¨åˆ° Mnesiaï¼ˆåµŒå…¥å¼æ•°æ®åº“ï¼Œå°å‹æ•°æ®åº“ï¼Œä¸é€‚ç”¨äºå¤§é‡å»¶è¿Ÿæ¶ˆæ¯çš„å®ç°ï¼‰ï¼Œæ£€æŸ¥ <code>x-delay</code> æ—¶é—´ï¼ˆæ¶ˆæ¯å¤´éƒ¨ï¼‰ï¼›</p><p>å»¶è¿Ÿæ’ä»¶åœ¨ RabbitMQ 3.5.7 åŠä»¥ä¸Šçš„ç‰ˆæœ¬æ‰æ”¯æŒï¼Œä¾èµ– Erlang/OPT 18.0 åŠä»¥ä¸Šè¿è¡Œç¯å¢ƒï¼›</p><h4 id="_6-4-3-é…ç½®ä»£ç " tabindex="-1"><a class="header-anchor" href="#_6-4-3-é…ç½®ä»£ç " aria-hidden="true">#</a> 6.4.3. é…ç½®ä»£ç </h4><h5 id="_6-4-3-1-åˆ›å»ºè‡ªå®šä¹‰äº¤æ¢æœºå¹¶ç»‘å®šæ™®é€šé˜Ÿåˆ—" tabindex="-1"><a class="header-anchor" href="#_6-4-3-1-åˆ›å»ºè‡ªå®šä¹‰äº¤æ¢æœºå¹¶ç»‘å®šæ™®é€šé˜Ÿåˆ—" aria-hidden="true">#</a> 6.4.3.1. åˆ›å»ºè‡ªå®šä¹‰äº¤æ¢æœºå¹¶ç»‘å®šæ™®é€šé˜Ÿåˆ—</h5><blockquote><p>æ™®é€šé˜Ÿåˆ—å…¶å®æ˜¯å½“åšå»¶è¿Ÿé˜Ÿåˆ—äº†</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@Setter</span>
<span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;my&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RabbitConfig</span> <span class="token punctuation">{</span>

    <span class="token doc-comment comment">/**
     * 1. å®šä¹‰äº¤æ¢æœº
     * 2. å®šä¹‰é˜Ÿåˆ—
     * 3. ç»‘å®šäº¤æ¢æœºå’Œé˜Ÿåˆ—
     */</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> exchangeName<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> queueDelayName<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> routingKey<span class="token punctuation">;</span>

    <span class="token doc-comment comment">/**
     * è‡ªå®šä¹‰äº¤æ¢æœº
     */</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">CustomExchange</span> <span class="token function">customExchange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> arguments <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// æ”¾ä¸€ä¸ªå‚æ•°ï¼ŒæŒ‡æ˜è¿™ä¸ªäº¤æ¢æœºæ˜¯ç›´è¿çš„</span>
        arguments<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;x-delayed-type&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;direct&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">CustomExchange</span><span class="token punctuation">(</span>exchangeName<span class="token punctuation">,</span> <span class="token string">&quot;x-delayed-message&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * å®šä¹‰æ™®é€šé˜Ÿåˆ—
     */</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Queue</span> <span class="token function">queue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// å»ºé€ è€…æ¨¡å¼</span>
        <span class="token keyword">return</span> <span class="token class-name">QueueBuilder</span><span class="token punctuation">.</span><span class="token function">durable</span><span class="token punctuation">(</span>queueDelayName<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * ç»‘å®šäº¤æ¢æœºå’Œæ™®é€šé˜Ÿåˆ—
     */</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Binding</span> <span class="token function">binding</span><span class="token punctuation">(</span><span class="token class-name">CustomExchange</span> customExchange<span class="token punctuation">,</span> <span class="token class-name">Queue</span> queue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// é˜Ÿåˆ—å’Œè‡ªå®šä¹‰äº¤æ¢æœºç»‘å®šï¼Œè¦æŒ‡å®šè·¯ç”±key</span>
        <span class="token keyword">return</span> <span class="token class-name">BindingBuilder</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>queue<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span>customExchange<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">with</span><span class="token punctuation">(</span>routingKey<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">noargs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_6-4-3-2-å‘é€æ¶ˆæ¯" tabindex="-1"><a class="header-anchor" href="#_6-4-3-2-å‘é€æ¶ˆæ¯" aria-hidden="true">#</a> 6.4.3.2. å‘é€æ¶ˆæ¯</h5><blockquote><p>è¿™é‡Œé€šè¿‡ä¸¤ä¸ªä»£ç å—æ¨¡æ‹Ÿä¸¤æ¡è¿‡æœŸæ—¶é—´ä¸ä¸€è‡´çš„æ¶ˆæ¯ï¼ŒéªŒè¯äº†æ’ä»¶äº¤æ¢æœºä¼šè§£å†³è¿‡æœŸæ—¶é—´ä¸ä¸€è‡´é—®é¢˜ã€‚</p><p>åŒæ—¶éœ€è¦è®¾ç½®æ¶ˆæ¯å±æ€§çš„æ¶ˆæ¯å¤´çš„<code>x-delay</code>å‚æ•°ï¼Œæ¥è®¾ç½®å»¶è¿Ÿæ—¶é—´ï¼ˆæ¯«ç§’ï¼‰</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sendMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">{</span>
        <span class="token class-name">MessageProperties</span> messageProperties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MessageProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// // 15ç§’è¿‡æœŸ</span>
        <span class="token comment">// messageProperties.setExpiration(&quot;15000&quot;);</span>
        <span class="token comment">// é€šè¿‡æ¶ˆæ¯å¤´æ¥è®¾ç½®è¿‡æœŸæ—¶é—´</span>
        messageProperties<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&quot;x-delay&quot;</span><span class="token punctuation">,</span> <span class="token number">15000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Message</span> msg <span class="token operator">=</span> <span class="token class-name">MessageBuilder</span>
            <span class="token punctuation">.</span><span class="token function">withBody</span><span class="token punctuation">(</span><span class="token string">&quot;Hello world!!!--15000&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">andProperties</span><span class="token punctuation">(</span>messageProperties<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        rabbitTemplate<span class="token punctuation">.</span><span class="token function">convertAndSend</span><span class="token punctuation">(</span>exchangeName<span class="token punctuation">,</span> routingKey<span class="token punctuation">,</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;ç¬¬ä¸€æ¡æ¶ˆæ¯å‘é€å®Œæ¯•ï¼Œå‘é€æ—¶é—´ä¸ºï¼š{}ï¼Œäº¤æ¢æœºä¸ºï¼š{}&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> exchangeName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token punctuation">{</span>
        <span class="token class-name">MessageProperties</span> messageProperties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MessageProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// // 5ç§’è¿‡æœŸ</span>
        <span class="token comment">// messageProperties.setExpiration(&quot;5000&quot;);</span>
        <span class="token comment">// é€šè¿‡æ¶ˆæ¯å¤´æ¥è®¾ç½®è¿‡æœŸæ—¶é—´</span>
        messageProperties<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&quot;x-delay&quot;</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Message</span> msg <span class="token operator">=</span> <span class="token class-name">MessageBuilder</span>
            <span class="token punctuation">.</span><span class="token function">withBody</span><span class="token punctuation">(</span><span class="token string">&quot;Hello world!!!--5000&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">andProperties</span><span class="token punctuation">(</span>messageProperties<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        rabbitTemplate<span class="token punctuation">.</span><span class="token function">convertAndSend</span><span class="token punctuation">(</span>exchangeName<span class="token punctuation">,</span> routingKey<span class="token punctuation">,</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;ç¬¬äºŒæ¡æ¶ˆæ¯å‘é€å®Œæ¯•ï¼Œå‘é€æ—¶é—´ä¸ºï¼š{}ï¼Œäº¤æ¢æœºä¸ºï¼š{}&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> exchangeName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_6-4-4-å…³äºttlå’Œx-delay" tabindex="-1"><a class="header-anchor" href="#_6-4-4-å…³äºttlå’Œx-delay" aria-hidden="true">#</a> 6.4.4. å…³äºTTLå’Œx-delay</h4><p>TTLå’Œx-delayä¸æ˜¯å¯¹ç«‹å…³ç³»ï¼Œ<strong>å¯ä»¥å…±å­˜</strong>ï¼Œæˆ–åªæœ‰x-delayï¼ˆæœ‰x-delayè¯´æ˜ç”¨äº†æ’ä»¶äº†ï¼Œè‚¯å®šè¦é…ç½®è¿™ä¸ªï¼‰</p><ol><li>è®¾ç½®äº†x-delayå‚æ•°åï¼Œæ¶ˆæ¯ä¼šè¢«å»¶è¿Ÿä¸€å®šæ—¶é—´åå†è¢«æŠ•é€’åˆ°é˜Ÿåˆ—ä¸­ã€‚</li><li>è®¾ç½®TTLï¼ˆTime-To-Liveï¼‰å‚æ•°ï¼Œåˆ™è¡¨ç¤ºæ¶ˆæ¯åœ¨é˜Ÿåˆ—ä¸­çš„å­˜æ´»æ—¶é—´ï¼Œè¶…è¿‡è¿™ä¸ªæ—¶é—´åï¼Œæ¶ˆæ¯ä¼šè¢«è‡ªåŠ¨åˆ é™¤ã€‚</li></ol><p>x-delayå’ŒTTLæ˜¯ä¸¤ä¸ªä¸åŒçš„æ¦‚å¿µï¼Œå¯ä»¥åˆ†åˆ«ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥ç»“åˆä½¿ç”¨ã€‚</p><ul><li>å¦‚æœ<strong>åªéœ€è¦å»¶è¿Ÿæ¶ˆæ¯æŠ•é€’</strong>ï¼Œå¯ä»¥åªè®¾ç½®x-delayå‚æ•°ï¼Œä¸éœ€è¦è®¾ç½®TTLã€‚</li><li>å¦‚æœ<strong>éœ€è¦å»¶è¿Ÿæ¶ˆæ¯æŠ•é€’å¹¶ä¸”é™åˆ¶æ¶ˆæ¯åœ¨é˜Ÿåˆ—ä¸­çš„å­˜æ´»æ—¶é—´</strong>ï¼Œå¯ä»¥åŒæ—¶è®¾ç½®x-delayå’ŒTTLå‚æ•°ã€‚</li></ul><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œx-delayå‚æ•°åªåœ¨å»¶è¿Ÿé˜Ÿåˆ—ä¸­ç”Ÿæ•ˆï¼Œä¸ä¼šå½±å“æ­£å¸¸é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯æŠ•é€’ã€‚è€ŒTTLå‚æ•°åˆ™é€‚ç”¨äºæ‰€æœ‰ç±»å‹çš„é˜Ÿåˆ—ï¼ŒåŒ…æ‹¬å»¶è¿Ÿé˜Ÿåˆ—å’Œæ­£å¸¸é˜Ÿåˆ—ã€‚</p><h2 id="_7-æ¶ˆæ¯æŠ•é€’å¯é æ€§" tabindex="-1"><a class="header-anchor" href="#_7-æ¶ˆæ¯æŠ•é€’å¯é æ€§" aria-hidden="true">#</a> 7. æ¶ˆæ¯æŠ•é€’å¯é æ€§</h2><p><img src="https://s2.loli.net/2023/10/17/PbxXEr3LWDNwaqg.jpg" alt="img"></p><p>æ¶ˆæ¯æŠ•é€’è¿‡ç¨‹ä¸»è¦å¯ä»¥åˆ†ä¸ºå¦‚å›¾æ‰€ç¤ºçš„å››ä¸ªé˜¶æ®µï¼Œæ¶ˆæ¯å¯é æ€§å°±æ˜¯ç¡®ä¿æ¯ä¸ªç¯èŠ‚çš„æˆåŠŸï¼Œä¸è¿‡è‚¯å®šä¼šç‰ºç‰²ä¸€ç‚¹æ€§èƒ½ï¼Œç”¨æ€§èƒ½æ¢å–å¯é æ€§ã€‚</p><p>å››ä¸ªé˜¶æ®µåˆ†åˆ«æ˜¯ï¼š</p><ol><li>ç”Ÿäº§è€…åˆ°äº¤æ¢æœº</li><li>äº¤æ¢æœºæŠ•é€’åˆ°é˜Ÿåˆ—</li><li>æ¶ˆæ¯åœ¨é˜Ÿåˆ—å’Œäº¤æ¢æœºä¸­çš„æŒä¹…åŒ–</li><li>é˜Ÿåˆ—åˆ°æ¶ˆè´¹è€…</li></ol><h3 id="_7-1-ç¬¬ä¸€é˜¶æ®µ-ç”Ÿäº§è€…åˆ°äº¤æ¢æœº" tabindex="-1"><a class="header-anchor" href="#_7-1-ç¬¬ä¸€é˜¶æ®µ-ç”Ÿäº§è€…åˆ°äº¤æ¢æœº" aria-hidden="true">#</a> 7.1. ç¬¬ä¸€é˜¶æ®µï¼šç”Ÿäº§è€…åˆ°äº¤æ¢æœº</h3><blockquote><p>ç›®æ ‡ï¼šç¡®ä¿æ¶ˆæ¯åˆ°è¾¾RabbitMQçš„äº¤æ¢æœºä¸Š</p></blockquote><p>å¯èƒ½å› ä¸ºå„ç§åŸå› å¯¼è‡´æ¶ˆæ¯æ— æ³•æ­£ç¡®åˆ°è¾¾äº¤æ¢æœºï¼Œæ¯”å¦‚ç½‘ç»œé—®é¢˜ã€é…ç½®äº¤æ¢æœºåå­—å†™é”™äº†ç­‰ç­‰ï¼Œè¿™æ—¶å€™å°±åº”è¯¥è®©<strong>ç”Ÿäº§è€…</strong>çŸ¥é“æ¶ˆæ¯æ˜¯å¦æˆåŠŸåˆ°è¾¾äº¤æ¢æœºã€‚</p><h4 id="_7-1-1-confirmæ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#_7-1-1-confirmæ¨¡å¼" aria-hidden="true">#</a> 7.1.1. Confirmæ¨¡å¼</h4><p><code>Confirmæ¨¡å¼</code>æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¸¸è§çš„å¤„ç†ä¸€é˜¶æ®µé—®é¢˜çš„æ¨¡å¼ã€‚å¼€å¯è¿™ä¸ªæ¨¡å¼åï¼Œå½“æ¶ˆæ¯å‘å‡ºï¼ŒRabbitMQæœåŠ¡å™¨å°±ä¼šè¿”å›ä¸€ä¸ªä¿¡å·ï¼ˆæ‰§è¡Œä¸€ä¸ªå›è°ƒï¼‰ï¼Œé€šè¿‡è¿™ä¸ªä¿¡å·çš„å‚æ•°å¯ä»¥åˆ¤æ–­æ¶ˆæ¯æ˜¯å¦åˆ°è¾¾äº¤æ¢æœºã€‚</p><blockquote><p>==ä¸è®ºæ¶ˆæ¯æ˜¯å¦åˆ°è¾¾äº¤æ¢æœºï¼Œéƒ½ä¼šè°ƒç”¨è¿™ä¸ªå›è°ƒ==</p></blockquote><h5 id="_7-1-1-1-å¼€å¯confirmæ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#_7-1-1-1-å¼€å¯confirmæ¨¡å¼" aria-hidden="true">#</a> 7.1.1.1. å¼€å¯Confirmæ¨¡å¼</h5><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">rabbitmq</span><span class="token punctuation">:</span>
    <span class="token key atrule">host</span><span class="token punctuation">:</span> ip
    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">5672</span>
    <span class="token key atrule">username</span><span class="token punctuation">:</span> ç”¨æˆ·å
    <span class="token key atrule">password</span><span class="token punctuation">:</span> å¯†ç 
    <span class="token key atrule">virtual-host</span><span class="token punctuation">:</span> è™šæ‹Ÿä¸»æœº 
    <span class="token comment"># å¼€å¯ç”Ÿäº§è€…ç¡®è®¤æ¨¡å¼</span>
    <span class="token key atrule">publisher-confirm-type</span><span class="token punctuation">:</span> correlated
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_7-1-1-2-ä»£ç " tabindex="-1"><a class="header-anchor" href="#_7-1-1-2-ä»£ç " aria-hidden="true">#</a> 7.1.1.2. ä»£ç </h5><p>å›è°ƒæ–¹æ³•åœ¨<code>RabbitTemplate.ConfirmCallback</code>æ¥å£ä¸­å®šä¹‰äº†ï¼Œå¯ä»¥é€šè¿‡å››ç§æ–¹å¼æ¥å®ç°æ¥å£å¹¶é‡å†™é‡Œé¢çš„æ–¹æ³•ï¼Œç»™<code>rabbitTemplate</code>é…ç½®ä¸Šå›è°ƒæ–¹æ³•ï¼Œå¹¶è®©å®ƒåœ¨å®ä¾‹åŒ–ä¹‹åå°±æ‰§è¡Œï¼ˆ@PostConstructï¼‰ï¼Œå› ä¸ºå®ä¾‹åŒ–çš„æ—¶å€™å°±ä»£è¡¨å‘æ¶ˆæ¯äº†ã€‚</p><ol><li>ç¼–å†™å¤–éƒ¨é…ç½®ç±»å®ç°æ¥å£ï¼Œå¹¶å®ç°æ–¹æ³•ï¼ˆè¿™é‡Œçš„å¤–éƒ¨æ˜¯ç›¸å¯¹äºå‘é€æ¶ˆæ¯ç±»è€Œè¨€çš„ï¼‰</li><li>è®©å‘é€æ¶ˆæ¯ç±»è‡ªèº«å®ç°æ¥å£ï¼Œåœ¨ç±»ä¸­å®ç°æ–¹æ³•</li><li>åªåœ¨<code>rabbitTemplate</code>éœ€è¦è®¾ç½®<code>confirmå›è°ƒ</code>æ—¶é€šè¿‡<strong>åŒ¿åå†…éƒ¨ç±»</strong>æ–¹å¼å®ç°</li><li>åœ¨<code>rabbitTemplate</code>éœ€è¦è®¾ç½®<code>confirmå›è°ƒ</code>æ—¶é€šè¿‡<strong>lambdaè¡¨è¾¾å¼</strong>æ–¹å¼å®ç°ï¼ˆæœ€ç®€æ´ï¼‰</li></ol><h6 id="_7-1-1-2-1-å¤–éƒ¨ç±»ç¼–å†™" tabindex="-1"><a class="header-anchor" href="#_7-1-1-2-1-å¤–éƒ¨ç±»ç¼–å†™" aria-hidden="true">#</a> 7.1.1.2.1. å¤–éƒ¨ç±»ç¼–å†™</h6><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyConfirmCallback</span> <span class="token keyword">implements</span> <span class="token class-name">RabbitTemplate<span class="token punctuation">.</span>ConfirmCallback</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">confirm</span><span class="token punctuation">(</span><span class="token class-name">CorrelationData</span> correlationData<span class="token punctuation">,</span> <span class="token keyword">boolean</span> ack<span class="token punctuation">,</span> <span class="token class-name">String</span> cause<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>ack<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;æ¶ˆæ¯åˆ°è¾¾&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;æ¶ˆæ¯æ²¡åˆ°è¾¾äº¤æ¢æœºï¼ŒåŸå› ä¸ºï¼š{}&quot;</span><span class="token punctuation">,</span> cause<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¤–éƒ¨ç±»ä½¿ç”¨</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MsgService</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">RabbitTemplate</span> rabbitTemplate<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;${my.exchangeName}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> exchangeName<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Resource</span>
    <span class="token keyword">private</span> <span class="token class-name">MyConfirmCallback</span> confirmCallback<span class="token punctuation">;</span>

    <span class="token doc-comment comment">/**
     * @PostConstruct ä¼šåœ¨å®ä¾‹åŒ–ä¹‹åè°ƒç”¨æ–¹æ³•
     */</span>
    <span class="token annotation punctuation">@PostConstruct</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        rabbitTemplate<span class="token punctuation">.</span><span class="token function">setConfirmCallback</span><span class="token punctuation">(</span>confirmCallback<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sendMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Message</span> msg <span class="token operator">=</span> <span class="token class-name">MessageBuilder</span>
                <span class="token punctuation">.</span><span class="token function">withBody</span><span class="token punctuation">(</span><span class="token string">&quot;Hello world!!!&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">CorrelationData</span> correlationData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CorrelationData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        correlationData<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token string">&quot;order-12345&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// ç¬¬å››ä¸ªå‚æ•°å‘é€å…³è”æ•°æ®</span>
        rabbitTemplate<span class="token punctuation">.</span><span class="token function">convertAndSend</span><span class="token punctuation">(</span>exchangeName<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;info&quot;</span><span class="token punctuation">,</span> msg<span class="token punctuation">,</span> correlationData<span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;æ¶ˆæ¯å‘é€å®Œæ¯•ï¼Œå‘é€æ—¶é—´ä¸ºï¼š{}ï¼Œäº¤æ¢æœºä¸ºï¼š{}&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> exchangeName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="_7-1-1-2-2-å‘é€æ¶ˆæ¯ç›´æ¥å®ç°æ¥å£" tabindex="-1"><a class="header-anchor" href="#_7-1-1-2-2-å‘é€æ¶ˆæ¯ç›´æ¥å®ç°æ¥å£" aria-hidden="true">#</a> 7.1.1.2.2. å‘é€æ¶ˆæ¯ç›´æ¥å®ç°æ¥å£</h6><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MsgService</span>  <span class="token keyword">implements</span> <span class="token class-name">RabbitTemplate<span class="token punctuation">.</span>ConfirmCallback</span><span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">RabbitTemplate</span> rabbitTemplate<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;${my.exchangeName}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> exchangeName<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@PostConstruct</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        rabbitTemplate<span class="token punctuation">.</span><span class="token function">setConfirmCallback</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sendMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Message</span> msg <span class="token operator">=</span> <span class="token class-name">MessageBuilder</span>
                <span class="token punctuation">.</span><span class="token function">withBody</span><span class="token punctuation">(</span><span class="token string">&quot;Hello world!!!&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">CorrelationData</span> correlationData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CorrelationData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        correlationData<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token string">&quot;order-12345&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// ç¬¬å››ä¸ªå‚æ•°å‘é€å…³è”æ•°æ®</span>
        rabbitTemplate<span class="token punctuation">.</span><span class="token function">convertAndSend</span><span class="token punctuation">(</span>exchangeName<span class="token punctuation">,</span> <span class="token string">&quot;info&quot;</span><span class="token punctuation">,</span> msg<span class="token punctuation">,</span> correlationData<span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;æ¶ˆæ¯å‘é€å®Œæ¯•ï¼Œå‘é€æ—¶é—´ä¸ºï¼š{}ï¼Œäº¤æ¢æœºä¸ºï¼š{}&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> exchangeName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">confirm</span><span class="token punctuation">(</span><span class="token class-name">CorrelationData</span> correlationData<span class="token punctuation">,</span> <span class="token keyword">boolean</span> ack<span class="token punctuation">,</span> <span class="token class-name">String</span> cause<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> id <span class="token operator">=</span> correlationData<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;idä¸º{}&quot;</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>ack<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;æ¶ˆæ¯åˆ°è¾¾&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;æ¶ˆæ¯æ²¡åˆ°è¾¾äº¤æ¢æœºï¼ŒåŸå› ä¸ºï¼š{}&quot;</span><span class="token punctuation">,</span> cause<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="_7-1-1-2-3-åŒ¿åå†…éƒ¨ç±»" tabindex="-1"><a class="header-anchor" href="#_7-1-1-2-3-åŒ¿åå†…éƒ¨ç±»" aria-hidden="true">#</a> 7.1.1.2.3. åŒ¿åå†…éƒ¨ç±»</h6><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@PostConstruct</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token doc-comment comment">/**
     * åŒ¿åå†…éƒ¨ç±»æ–¹æ³•
     */</span>
    rabbitTemplate<span class="token punctuation">.</span><span class="token function">setConfirmCallback</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RabbitTemplate<span class="token punctuation">.</span>ConfirmCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">confirm</span><span class="token punctuation">(</span><span class="token class-name">CorrelationData</span> correlationData<span class="token punctuation">,</span> <span class="token keyword">boolean</span> ack<span class="token punctuation">,</span> <span class="token class-name">String</span> cause<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">String</span> id <span class="token operator">=</span> correlationData<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;idä¸º{}&quot;</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>ack<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;æ¶ˆæ¯åˆ°è¾¾&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;æ¶ˆæ¯æ²¡åˆ°è¾¾äº¤æ¢æœºï¼ŒåŸå› ä¸ºï¼š{}&quot;</span><span class="token punctuation">,</span> cause<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="_7-1-1-2-4-lambdaè¡¨è¾¾å¼" tabindex="-1"><a class="header-anchor" href="#_7-1-1-2-4-lambdaè¡¨è¾¾å¼" aria-hidden="true">#</a> 7.1.1.2.4. lambdaè¡¨è¾¾å¼</h6><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@PostConstruct</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token doc-comment comment">/**
     * lambdaè¡¨è¾¾å¼
     */</span>
    rabbitTemplate<span class="token punctuation">.</span><span class="token function">setConfirmCallback</span><span class="token punctuation">(</span>
        <span class="token comment">// (CorrelationData correlationData, boolean ack, String cause) -&gt; {</span>
        <span class="token comment">// ä¹Ÿå¯ä»¥ä¸å®šä¹‰ç±»å‹</span>
        <span class="token punctuation">(</span>correlationData<span class="token punctuation">,</span> ack<span class="token punctuation">,</span> cause<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">// lambdaè¡¨è¾¾å¼</span>
            <span class="token class-name">String</span> id <span class="token operator">=</span> correlationData<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;idä¸º{}&quot;</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>ack<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;æ¶ˆæ¯åˆ°è¾¾&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;æ¶ˆæ¯æ²¡åˆ°è¾¾äº¤æ¢æœºï¼ŒåŸå› ä¸ºï¼š{}&quot;</span><span class="token punctuation">,</span> cause<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-2-ç¬¬äºŒé˜¶æ®µ-äº¤æ¢æœºåˆ°é˜Ÿåˆ—" tabindex="-1"><a class="header-anchor" href="#_7-2-ç¬¬äºŒé˜¶æ®µ-äº¤æ¢æœºåˆ°é˜Ÿåˆ—" aria-hidden="true">#</a> 7.2. ç¬¬äºŒé˜¶æ®µï¼šäº¤æ¢æœºåˆ°é˜Ÿåˆ—</h3><h4 id="_7-2-1-returnæ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#_7-2-1-returnæ¨¡å¼" aria-hidden="true">#</a> 7.2.1. Returnæ¨¡å¼</h4><p>ä½¿ç”¨æ­¥éª¤ï¼š</p><ol><li>å¼€å¯<code>Returnæ¨¡å¼</code></li><li>ä½¿ç”¨<code>rabbitTemplate.setReturnsCallback</code>è®¾ç½®å›è°ƒå‡½æ•°</li><li>å¦‚æœæ¶ˆæ¯ä»äº¤æ¢æœºæŠ•é€’åˆ°é˜Ÿåˆ—çš„è¿‡ç¨‹å¤±è´¥ï¼Œæ‰ä¼šè°ƒç”¨è¿™ä¸ªå›è°ƒ <ul><li><code>Confirm</code>çš„å›è°ƒæ˜¯<strong>ä¸€å®šä¼š</strong>è°ƒç”¨çš„</li><li><code>Return</code>çš„å›è°ƒ<strong>åªæœ‰å¤±è´¥</strong>æ‰ä¼šè°ƒç”¨</li></ul></li></ol><h4 id="_7-2-2-ä»£ç " tabindex="-1"><a class="header-anchor" href="#_7-2-2-ä»£ç " aria-hidden="true">#</a> 7.2.2. ä»£ç </h4><blockquote><p>åŒ<code>Confirmæ¨¡å¼</code>çš„ç¼–å†™å¥—è·¯ï¼ŒReturnä¹Ÿæœ‰4ä¸­ç¼–å†™æ–¹å¼ï¼š</p><ol><li>å‘é€æ¶ˆæ¯ç±»çš„å¤–éƒ¨ç±»å®ç°æ¥å£</li><li>å‘é€æ¶ˆæ¯ç±»ç›´æ¥å®ç°æ¥å£</li><li>åœ¨<code>rabbitTemplate</code>è®¾ç½®å›è°ƒæ—¶<strong>åŒ¿åå†…éƒ¨ç±»</strong>å®ç°</li><li>åœ¨<code>rabbitTemplate</code>è®¾ç½®å›è°ƒæ—¶é€šè¿‡<strong>lambdaè¡¨è¾¾å¼</strong>å®ç°</li></ol><p>æœ¬èŠ‚åªç»™å‡ºç¬¬å››ç§lambdaè¡¨è¾¾å¼ç¤ºä¾‹ä»£ç </p></blockquote><h5 id="_7-2-2-1-lambdaè¡¨è¾¾å¼" tabindex="-1"><a class="header-anchor" href="#_7-2-2-1-lambdaè¡¨è¾¾å¼" aria-hidden="true">#</a> 7.2.2.1. lambdaè¡¨è¾¾å¼</h5><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@PostConstruct</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// è®¾ç½®å›è°ƒ</span>
    rabbitTemplate<span class="token punctuation">.</span><span class="token function">setReturnsCallback</span><span class="token punctuation">(</span>
        <span class="token punctuation">(</span>returnedMessage<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;æ¶ˆæ¯ä»äº¤æ¢æœºè·¯ç”±åˆ°é˜Ÿåˆ—å¤±è´¥ï¼ŒåŸå› ä¸ºï¼š{}&quot;</span><span class="token punctuation">,</span> returnedMessage<span class="token punctuation">.</span><span class="token function">getReplyText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-3-ç¬¬ä¸‰é˜¶æ®µ-æŒä¹…åŒ–" tabindex="-1"><a class="header-anchor" href="#_7-3-ç¬¬ä¸‰é˜¶æ®µ-æŒä¹…åŒ–" aria-hidden="true">#</a> 7.3. ç¬¬ä¸‰é˜¶æ®µï¼šæŒä¹…åŒ–</h3><p>å¯èƒ½å› ä¸ºç³»ç»Ÿå®•æœºã€é‡å¯ã€å…³é—­ç­‰ç­‰æƒ…å†µå¯¼è‡´æ²¡æœ‰æŒä¹…åŒ–å­˜å‚¨åœ¨é˜Ÿåˆ—çš„æ¶ˆæ¯ä¸¢å¤±ã€‚</p><p>æ‰€ä»¥è¦é€šè¿‡ä¸€äº›æŒä¹…åŒ–è®¾ç½®è®©æ•°æ®ä¸ä¼šå› ä¸ºè¿™äº›æƒ…å†µä¸¢å¤±ã€‚</p><h4 id="_7-3-1-æŒä¹…åŒ–ä¸»è¦åˆ†ä¸ºå››ç§" tabindex="-1"><a class="header-anchor" href="#_7-3-1-æŒä¹…åŒ–ä¸»è¦åˆ†ä¸ºå››ç§" aria-hidden="true">#</a> 7.3.1. æŒä¹…åŒ–ä¸»è¦åˆ†ä¸ºå››ç§</h4><ol><li>äº¤æ¢æœºæŒä¹…åŒ–</li><li>é˜Ÿåˆ—æŒä¹…åŒ–</li><li>æ¶ˆæ¯æŒä¹…åŒ–</li><li>æ­å»ºé›†ç¾¤ã€é•œåƒé˜Ÿåˆ—ï¼Œé«˜å¯ç”¨</li></ol><h5 id="_7-3-1-1-äº¤æ¢æœºæŒä¹…åŒ–" tabindex="-1"><a class="header-anchor" href="#_7-3-1-1-äº¤æ¢æœºæŒä¹…åŒ–" aria-hidden="true">#</a> 7.3.1.1. äº¤æ¢æœºæŒä¹…åŒ–</h5><p>åœ¨å®šä¹‰äº¤æ¢æœºæ—¶ï¼Œ<code>é»˜è®¤æŒä¹…åŒ–</code>ï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨æ”¹æˆä¸æŒä¹…åŒ–</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * å®šä¹‰äº¤æ¢æœº
 */</span>
<span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">DirectExchange</span> <span class="token function">directExchange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">ExchangeBuilder</span>
        <span class="token comment">// äº¤æ¢æœºåå­—</span>
        <span class="token punctuation">.</span><span class="token function">directExchange</span><span class="token punctuation">(</span>exchangeName<span class="token punctuation">)</span>
        <span class="token comment">/*// æŒä¹…åŒ–ï¼Œé»˜è®¤true
                .durable(false)*/</span>
        <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>==æºç ï¼š==</p><blockquote><p>åœ¨åˆ›å»ºäº¤æ¢æœºå»ºé€ è€…æ—¶ï¼Œé»˜è®¤æŒä¹…åŒ–</p></blockquote><p><img src="https://s2.loli.net/2023/10/17/BX7mNgClI2Tstkj.png" alt="image-20230611104909877"></p><h5 id="_7-3-1-2-é˜Ÿåˆ—æŒä¹…åŒ–" tabindex="-1"><a class="header-anchor" href="#_7-3-1-2-é˜Ÿåˆ—æŒä¹…åŒ–" aria-hidden="true">#</a> 7.3.1.2. é˜Ÿåˆ—æŒä¹…åŒ–</h5><p>åœ¨å®šä¹‰é˜Ÿåˆ—çš„æ—¶å€™ï¼Œ<code>é»˜è®¤æŒä¹…åŒ–</code></p><h6 id="_7-3-1-2-1-é€šè¿‡newæ–¹å¼åˆ›å»ºé˜Ÿåˆ—" tabindex="-1"><a class="header-anchor" href="#_7-3-1-2-1-é€šè¿‡newæ–¹å¼åˆ›å»ºé˜Ÿåˆ—" aria-hidden="true">#</a> 7.3.1.2.1. é€šè¿‡newæ–¹å¼åˆ›å»ºé˜Ÿåˆ—</h6><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * å®šä¹‰é˜Ÿåˆ—
 */</span>
<span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">Queue</span> <span class="token function">queueA</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Queue</span><span class="token punctuation">(</span><span class="token string">&quot;queue.fanout.a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>==æ„é€ æ–¹æ³•æºç ï¼š==é»˜è®¤æŒä¹…åŒ–</p><p><img src="https://s2.loli.net/2023/10/17/mwaYlBS5DW1pXxN.png" alt="image-20230611104530777"></p><h6 id="_7-3-1-2-2-é€šè¿‡å»ºé€ è€…æ¨¡å¼åˆ›å»ºé˜Ÿåˆ—" tabindex="-1"><a class="header-anchor" href="#_7-3-1-2-2-é€šè¿‡å»ºé€ è€…æ¨¡å¼åˆ›å»ºé˜Ÿåˆ—" aria-hidden="true">#</a> 7.3.1.2.2. é€šè¿‡å»ºé€ è€…æ¨¡å¼åˆ›å»ºé˜Ÿåˆ—</h6><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * å®šä¹‰é˜Ÿåˆ—
 */</span>
<span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">Queue</span> <span class="token function">queueA</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">QueueBuilder</span><span class="token punctuation">.</span><span class="token function">durable</span><span class="token punctuation">(</span>queueAName<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>==æºç ï¼š==</p><p><code>durableæ–¹æ³•</code>æºç ï¼š</p><p><img src="https://s2.loli.net/2023/10/17/8aqr7u2ntlvW9sp.png" alt="image-20230611104641886"></p><p>åˆ°<code>setDurable()</code>æºç ï¼šé»˜è®¤æŒä¹…åŒ–</p><p><img src="https://s2.loli.net/2023/10/17/wOkcpZL6bTxuj9e.png" alt="image-20230611104718936"></p><h5 id="_7-3-1-3-æ¶ˆæ¯æŒä¹…åŒ–" tabindex="-1"><a class="header-anchor" href="#_7-3-1-3-æ¶ˆæ¯æŒä¹…åŒ–" aria-hidden="true">#</a> 7.3.1.3. æ¶ˆæ¯æŒä¹…åŒ–</h5><blockquote><p>æ¶ˆæ¯é€šè¿‡<code>æ¶ˆæ¯å±æ€§MessageProperties</code>ä¸­æŒ‡å®š<code>MessageDeliveryMode</code>çš„æšä¸¾ç±»å‹æ¥ç¡®å®šæ˜¯å¦æŒä¹…åŒ–ï¼Œ==é»˜è®¤æŒä¹…åŒ–==</p></blockquote><h6 id="_7-3-1-3-1-é€šè¿‡æ„é€ è€…åˆ›å»ºæ¶ˆæ¯" tabindex="-1"><a class="header-anchor" href="#_7-3-1-3-1-é€šè¿‡æ„é€ è€…åˆ›å»ºæ¶ˆæ¯" aria-hidden="true">#</a> 7.3.1.3.1. é€šè¿‡æ„é€ è€…åˆ›å»ºæ¶ˆæ¯</h6><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MsgService</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">RabbitTemplate</span> rabbitTemplate<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;${my.exchangeName}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> exchangeName<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sendMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Message</span> msg <span class="token operator">=</span> <span class="token class-name">MessageBuilder</span><span class="token punctuation">.</span><span class="token function">withBody</span><span class="token punctuation">(</span><span class="token string">&quot;Hello world!!!&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        rabbitTemplate<span class="token punctuation">.</span><span class="token function">convertAndSend</span><span class="token punctuation">(</span>exchangeName<span class="token punctuation">,</span> <span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;æ¶ˆæ¯å‘é€å®Œæ¯•ï¼Œå‘é€æ—¶é—´ä¸ºï¼š{}ï¼Œäº¤æ¢æœºä¸ºï¼š{}&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> exchangeName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="_7-3-1-3-2-messagebuilder-build-æºç " tabindex="-1"><a class="header-anchor" href="#_7-3-1-3-2-messagebuilder-build-æºç " aria-hidden="true">#</a> 7.3.1.3.2. <code>MessageBuilder.build()</code>æºç ï¼š</h6><blockquote><p>åªæˆªå–éƒ¨åˆ†æºç </p><p>å¦‚æœæ²¡æœ‰åœ¨åˆ›å»ºé˜Ÿåˆ—çš„æ—¶å€™å¸¦ä¸Šæ¶ˆæ¯å±æ€§ï¼Œå°±ä¼šè°ƒç”¨<code>this.buildProperties()</code>ï¼Œä»çˆ¶ç±»ä¸­æ‹¿åˆ°æ¶ˆæ¯å±æ€§</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">MessageBuilder</span> <span class="token keyword">extends</span> <span class="token class-name">MessageBuilderSupport</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Message</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">Message</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Message</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>body<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">buildProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="_7-3-1-3-3-çˆ¶ç±»æ¶ˆæ¯å±æ€§" tabindex="-1"><a class="header-anchor" href="#_7-3-1-3-3-çˆ¶ç±»æ¶ˆæ¯å±æ€§" aria-hidden="true">#</a> 7.3.1.3.3. çˆ¶ç±»æ¶ˆæ¯å±æ€§</h6><blockquote><p>åªæˆªå–éƒ¨åˆ†æºç </p><p>å¦‚æœæ²¡æœ‰ä¼ é€’è‡ªå®šä¹‰æ¶ˆæ¯å±æ€§ï¼Œå°±ä¼šç”¨ç»„åˆè¿›æ¥çš„æ¶ˆæ¯å±æ€§</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">MessageBuilderSupport</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">MessageProperties</span> properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MessageProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">protected</span> <span class="token class-name">MessageProperties</span> <span class="token function">buildProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>properties<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="_7-3-1-3-4-å®ä¾‹åŒ–æ¶ˆæ¯å±æ€§" tabindex="-1"><a class="header-anchor" href="#_7-3-1-3-4-å®ä¾‹åŒ–æ¶ˆæ¯å±æ€§" aria-hidden="true">#</a> 7.3.1.3.4. å®ä¾‹åŒ–æ¶ˆæ¯å±æ€§</h6><blockquote><p>åœ¨å®ä¾‹åŒ–æ¶ˆæ¯å±æ€§çš„æ—¶å€™ï¼Œä¼šé»˜è®¤è®¾ç½®ä¸ŠæŒä¹…åŒ–çš„æ¨¡å¼ï¼ˆæšä¸¾ï¼‰</p></blockquote><p><img src="https://s2.loli.net/2023/10/17/sIP4uVtU9SBigvh.png" alt="image-20230611110949621"></p><h6 id="_7-3-1-3-5-messagedeliverymode" tabindex="-1"><a class="header-anchor" href="#_7-3-1-3-5-messagedeliverymode" aria-hidden="true">#</a> 7.3.1.3.5. MessageDeliveryMode</h6><p><img src="https://s2.loli.net/2023/10/17/xmk1ITeQ3jDpEOW.png" alt="image-20230611111018741"></p><h3 id="_7-4-ç¬¬å››é˜¶æ®µ-é˜Ÿåˆ—åˆ°æ¶ˆè´¹è€…" tabindex="-1"><a class="header-anchor" href="#_7-4-ç¬¬å››é˜¶æ®µ-é˜Ÿåˆ—åˆ°æ¶ˆè´¹è€…" aria-hidden="true">#</a> 7.4. ç¬¬å››é˜¶æ®µï¼šé˜Ÿåˆ—åˆ°æ¶ˆè´¹è€…</h3><h4 id="_7-4-1-æ¶ˆè´¹è€…æ‰‹åŠ¨ç¡®è®¤æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#_7-4-1-æ¶ˆè´¹è€…æ‰‹åŠ¨ç¡®è®¤æ¨¡å¼" aria-hidden="true">#</a> 7.4.1. æ¶ˆè´¹è€…æ‰‹åŠ¨ç¡®è®¤æ¨¡å¼</h4><blockquote><p>æ­£å¸¸æƒ…å†µä¸‹ï¼Œæ¶ˆè´¹è€…ä¸€æ—¦æ¥æ”¶äº†æ¶ˆæ¯ï¼Œæ¶ˆæ¯ä¼š<strong>ç«‹åˆ»</strong>ä»é˜Ÿåˆ—ä¸­åˆ é™¤ï¼Œå¦‚æœæ­¤æ—¶æ¶ˆè´¹è€…å‡ºç°æŸäº›å¼‚å¸¸ï¼ˆæ¯”å¦‚è¦æŠŠæ¶ˆæ¯å­˜æ•°æ®åº“ï¼Œä½†æ˜¯ä¸šåŠ¡æŠ¥é”™äº†æ²¡å­˜è¿›å»ï¼‰ï¼Œå°±ä¼šå¯¼è‡´æ¶ˆæ¯ä¸¢å¤±ã€‚</p><p>é€šè¿‡æ¶ˆè´¹è€…æ‰‹åŠ¨ç¡®è®¤æ¨¡å¼å¯ä»¥è®©<strong>æ¶ˆè´¹è€…æ¥æ§åˆ¶é˜Ÿåˆ—æ˜¯å¦åˆ é™¤æ¶ˆæ¯</strong>ã€‚</p></blockquote><p>ä½¿ç”¨æ­¥éª¤ï¼š</p><ol><li>å¼€å¯æ¶ˆè´¹è€…æ‰‹åŠ¨ç¡®è®¤æ¨¡å¼</li><li>æ¶ˆè´¹è€…æ¶ˆè´¹å®Œæˆåå†é€šçŸ¥é˜Ÿåˆ—åˆ é™¤ï¼Œå¦åˆ™æ‹’ç»æ¶ˆæ¯</li></ol><h5 id="_7-4-1-1-ä»£ç " tabindex="-1"><a class="header-anchor" href="#_7-4-1-1-ä»£ç " aria-hidden="true">#</a> 7.4.1.1. ä»£ç </h5><h6 id="_7-4-1-1-1-å¼€å¯æ‰‹åŠ¨ç¡®è®¤" tabindex="-1"><a class="header-anchor" href="#_7-4-1-1-1-å¼€å¯æ‰‹åŠ¨ç¡®è®¤" aria-hidden="true">#</a> 7.4.1.1.1. å¼€å¯æ‰‹åŠ¨ç¡®è®¤</h6><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">rabbitmq</span><span class="token punctuation">:</span>
    <span class="token key atrule">host</span><span class="token punctuation">:</span> ip
    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">5672</span>
    <span class="token key atrule">username</span><span class="token punctuation">:</span> ç”¨æˆ·å
    <span class="token key atrule">password</span><span class="token punctuation">:</span> å¯†ç 
    <span class="token key atrule">virtual-host</span><span class="token punctuation">:</span> è™šæ‹Ÿä¸»æœº
    <span class="token key atrule">listener</span><span class="token punctuation">:</span>
      <span class="token key atrule">simple</span><span class="token punctuation">:</span>
        <span class="token comment"># å¼€å¯æ¶ˆè´¹è€…æ‰‹åŠ¨ç¡®è®¤</span>
        <span class="token key atrule">acknowledge-mode</span><span class="token punctuation">:</span> manual
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="_7-4-1-1-2-æ¥æ”¶æ¶ˆæ¯æ—¶å€™æ‰‹åŠ¨ç¡®è®¤" tabindex="-1"><a class="header-anchor" href="#_7-4-1-1-2-æ¥æ”¶æ¶ˆæ¯æ—¶å€™æ‰‹åŠ¨ç¡®è®¤" aria-hidden="true">#</a> 7.4.1.1.2. æ¥æ”¶æ¶ˆæ¯æ—¶å€™æ‰‹åŠ¨ç¡®è®¤</h6><blockquote><ul><li><code>channel.basicAck</code>æ¥ç¡®è®¤æ¶ˆæ¯</li><li><code>channel.basicNack</code>æ¥æ‹’ç»æ¶ˆæ¯</li></ul></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MsgReceive</span> <span class="token punctuation">{</span>

    <span class="token doc-comment comment">/**
     * æ¥æ”¶æ­£å¸¸é˜Ÿåˆ—çš„æ¶ˆæ¯ï¼Œä½†æ˜¯ä¸ç¡®è®¤ï¼Œä¹Ÿä¸é‡æŠ•
     *
     * <span class="token keyword">@param</span> <span class="token parameter">message</span>
     */</span>
    <span class="token annotation punctuation">@RabbitListener</span><span class="token punctuation">(</span>queues <span class="token operator">=</span> <span class="token string">&quot;ç›‘å¬é˜Ÿåˆ—å&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getMsg</span><span class="token punctuation">(</span><span class="token class-name">Message</span> message<span class="token punctuation">,</span> <span class="token class-name">Channel</span> channel<span class="token punctuation">)</span>  <span class="token punctuation">{</span>
        <span class="token comment">// è·å¾—æ¶ˆæ¯å±æ€§</span>
        <span class="token class-name">MessageProperties</span> messageProperties <span class="token operator">=</span> message<span class="token punctuation">.</span><span class="token function">getMessageProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// æ‹¿åˆ°æ¶ˆæ¯å”¯ä¸€id</span>
        <span class="token keyword">long</span> deliveryTag <span class="token operator">=</span> messageProperties<span class="token punctuation">.</span><span class="token function">getDeliveryTag</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> body <span class="token operator">=</span> message<span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>
            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;æ—¶é—´ï¼š{}ï¼Œè·å¾—æ¶ˆæ¯ï¼š{}&quot;</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// æ— å¼‚å¸¸ï¼Œé€šè¿‡ä¿¡é“é€šçŸ¥é˜Ÿåˆ—ï¼Œç¡®è®¤æ”¶åˆ°</span>
            <span class="token comment">// multipleï¼ˆç¬¬äºŒå‚æ•°ï¼‰è‹¥ä¸ºtrueä»£è¡¨ä¹‹å‰çš„æ¶ˆæ¯å…¨éƒ½ç¡®è®¤ï¼Œä¸ºfalseåªç¡®è®¤å½“å‰æ¶ˆæ¯</span>
            channel<span class="token punctuation">.</span><span class="token function">basicAck</span><span class="token punctuation">(</span>deliveryTag<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;æ¥æ”¶å¤±è´¥ï¼ŒåŸå› ï¼š{}&quot;</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// requeue â€“ true if the rejected message(s) should be requeued rather than discarded/dead-lettered</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token comment">// æ¶ˆè´¹è€…æ‰‹åŠ¨ä¸ç¡®è®¤ï¼Œä¸é‡æ–°æŠ•é€’ï¼ˆä¸é‡æ–°å…¥é˜Ÿï¼‰</span>
                channel<span class="token punctuation">.</span><span class="token function">basicNack</span><span class="token punctuation">(</span>deliveryTag<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>ex<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_8-äº¤æ¢æœºå±æ€§" tabindex="-1"><a class="header-anchor" href="#_8-äº¤æ¢æœºå±æ€§" aria-hidden="true">#</a> 8. äº¤æ¢æœºå±æ€§</h2><blockquote><p>åœ¨åˆ›å»ºäº¤æ¢æœºçš„æ—¶å€™ï¼Œå¯ä»¥æŒ‡å®šçš„ä¸€äº›å±æ€§</p><p>æ³¨æ„ï¼šåˆ›å»ºäº¤æ¢æœºæˆ–è€…é˜Ÿåˆ—å®Œæˆåå†é‡æ–°åˆ›å»ºï¼Œå¦‚æœä¿®æ”¹äº¤æ¢æœºæˆ–é˜Ÿåˆ—å‚æ•°åˆ™ä¼šæŠ¥é”™ï¼</p></blockquote><ol><li><code>Name</code>ï¼šäº¤æ¢æœºåç§°ï¼›å°±æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²</li><li><code>Type</code>ï¼šäº¤æ¢æœºç±»å‹ï¼Œdirect, topic, fanout, headerså››ç§</li><li><code>Durability</code>ï¼šæŒä¹…åŒ–ï¼Œå£°æ˜äº¤æ¢æœºæ˜¯å¦æŒä¹…åŒ–ï¼Œä»£è¡¨äº¤æ¢æœºåœ¨æœåŠ¡å™¨é‡å¯åæ˜¯å¦è¿˜å­˜åœ¨ï¼›</li><li><code>Auto delete</code> ï¼šæ˜¯å¦è‡ªåŠ¨åˆ é™¤ï¼Œæ›¾ç»æœ‰é˜Ÿåˆ—ç»‘å®šåˆ°è¯¥äº¤æ¢æœºï¼Œåæ¥è§£ç»‘äº†ï¼Œé‚£å°±ä¼šè‡ªåŠ¨åˆ é™¤è¯¥äº¤æ¢æœºï¼›</li><li><code>Internal</code>ï¼šå†…éƒ¨ä½¿ç”¨çš„ï¼Œå¦‚æœæ˜¯yesï¼Œå®¢æˆ·ç«¯æ— æ³•ç›´æ¥å‘æ¶ˆæ¯åˆ°æ­¤äº¤æ¢æœºï¼Œå®ƒåªèƒ½ç”¨äºäº¤æ¢æœºä¸äº¤æ¢æœºçš„ç»‘å®šã€‚</li><li><code>Arguments</code><ul><li>åªæœ‰ä¸€ä¸ªå–å€¼<code>alternate-exchange</code>ï¼Œè¡¨ç¤ºå¤‡ç”¨äº¤æ¢æœºï¼›</li></ul></li></ol><h3 id="_8-1-è®¾ç½®å±æ€§" tabindex="-1"><a class="header-anchor" href="#_8-1-è®¾ç½®å±æ€§" aria-hidden="true">#</a> 8.1. è®¾ç½®å±æ€§</h3><p>é€šè¿‡å»ºé€ è€…æ¨¡å¼åˆ›å»ºä¼šæ›´åŠ æ–¹ä¾¿ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡æ–¹æ³•æ¥ç»™äº¤æ¢æœºåŠ ä¸Šå„ç§å±æ€§ã€‚</p><p>å…·ä½“å°±ä¸å±•å¼€ä¸¾ä¾‹äº†ï¼Œå¯ä»¥å‚è€ƒæºç <code>ExchangeBuilder</code>ä¸­çš„å„ç§æ–¹æ³•æ¥æ ¹æ®éœ€è¦è®¾ç½®</p><h3 id="_8-2-å¤‡ç”¨äº¤æ¢æœºè®¾ç½®" tabindex="-1"><a class="header-anchor" href="#_8-2-å¤‡ç”¨äº¤æ¢æœºè®¾ç½®" aria-hidden="true">#</a> 8.2. å¤‡ç”¨äº¤æ¢æœºè®¾ç½®</h3><h4 id="_8-2-1-æ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#_8-2-1-æ¦‚å¿µ" aria-hidden="true">#</a> 8.2.1. æ¦‚å¿µ</h4><p>å½“æ¶ˆæ¯ç»è¿‡äº¤æ¢å™¨å‡†å¤‡è·¯ç”±ç»™é˜Ÿåˆ—çš„æ—¶å€™ï¼Œå‘ç°æ²¡æœ‰å¯¹åº”çš„é˜Ÿåˆ—å¯ä»¥æŠ•é€’ä¿¡æ¯ï¼Œåœ¨RabbitMQä¸­ä¼š<strong>é»˜è®¤ä¸¢å¼ƒæ¶ˆæ¯</strong>ï¼Œå¦‚æœæƒ³è¦ç›‘æµ‹å“ªäº›æ¶ˆæ¯è¢«æŠ•é€’åˆ°æ²¡æœ‰å¯¹åº”çš„é˜Ÿåˆ—ï¼Œå¯ä»¥ç”¨å¤‡ç”¨äº¤æ¢æœºæ¥å®ç°ï¼Œå¯ä»¥æ¥æ”¶å¤‡ç”¨äº¤æ¢æœºçš„æ¶ˆæ¯ï¼Œç„¶åè®°å½•æ—¥å¿—æˆ–å‘é€æŠ¥è­¦ä¿¡æ¯ã€‚</p><blockquote><p>å¤‡ç”¨äº¤æ¢æœºä¸€èˆ¬å®šä¹‰ä¸º<code>æ‰‡å½¢äº¤æ¢æœº</code>ï¼ˆFanout Exchangeï¼‰ï¼Œå› ä¸ºæ¶ˆæ¯ä¼šåˆ°è¾¾å¤‡ç”¨äº¤æ¢æœºå°±æ˜¯å› ä¸ºæ— æ³•æ­£ç¡®æŠ•é€’åˆ°é˜Ÿåˆ—ï¼Œå¤‡ç”¨äº¤æ¢æœºå°±éœ€è¦æŠŠè¿™äº›ä¿¡æ¯å…¨éƒ¨è¾“å‡ºåˆ°æŒ‡å®šä½ç½®è®©å¼€å‘è€…å¤„ç†</p></blockquote><h4 id="_8-2-2-ä»£ç " tabindex="-1"><a class="header-anchor" href="#_8-2-2-ä»£ç " aria-hidden="true">#</a> 8.2.2. ä»£ç </h4><h5 id="_8-2-2-1-å®šä¹‰å¤‡ç”¨äº¤æ¢æœºå’Œå¤‡ç”¨é˜Ÿåˆ—-ç»‘å®šä»–ä»¬çš„å…³ç³»" tabindex="-1"><a class="header-anchor" href="#_8-2-2-1-å®šä¹‰å¤‡ç”¨äº¤æ¢æœºå’Œå¤‡ç”¨é˜Ÿåˆ—-ç»‘å®šä»–ä»¬çš„å…³ç³»" aria-hidden="true">#</a> 8.2.2.1. å®šä¹‰å¤‡ç”¨äº¤æ¢æœºå’Œå¤‡ç”¨é˜Ÿåˆ—ï¼Œç»‘å®šä»–ä»¬çš„å…³ç³»</h5><blockquote><p>å¤‡ç”¨äº¤æ¢æœºå’Œå¤‡ç”¨é˜Ÿåˆ—å…¶å®ä¹Ÿæ˜¯<strong>æ™®é€šäº¤æ¢æœºå’Œé˜Ÿåˆ—</strong>ï¼Œåªæ˜¯ä¼šå°†å¤‡ç”¨äº¤æ¢æœºç»‘å®šç»™æ™®é€šäº¤æ¢æœºï¼Œè®©å®ƒæˆä¸ºå¤‡ç”¨çš„è€Œå·²</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * å®šä¹‰å¤‡ç”¨äº¤æ¢æœº
 */</span>
<span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">FanoutExchange</span> <span class="token function">fanoutExchange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">ExchangeBuilder</span>
        <span class="token comment">// äº¤æ¢æœºåå­—</span>
        <span class="token punctuation">.</span><span class="token function">fanoutExchange</span><span class="token punctuation">(</span>exchangeAlternateName<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token doc-comment comment">/**
 * å®šä¹‰å¤‡ç”¨é˜Ÿåˆ—
 */</span>
<span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">Queue</span> <span class="token function">queueAlternate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">QueueBuilder</span><span class="token punctuation">.</span><span class="token function">durable</span><span class="token punctuation">(</span>queueAlternateName<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token doc-comment comment">/**
 * ç»‘å®šå¤‡ç”¨äº¤æ¢æœºå’Œé˜Ÿåˆ—
 */</span>
<span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">Binding</span> <span class="token function">bindingAlternate</span><span class="token punctuation">(</span><span class="token class-name">FanoutExchange</span> fanoutExchange<span class="token punctuation">,</span> <span class="token class-name">Queue</span> queueAlternate<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">BindingBuilder</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>queueAlternate<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span>fanoutExchange<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_8-2-2-2-ç»™æ™®é€šäº¤æ¢æœºç»‘å®šå¤‡ç”¨äº¤æ¢æœº" tabindex="-1"><a class="header-anchor" href="#_8-2-2-2-ç»™æ™®é€šäº¤æ¢æœºç»‘å®šå¤‡ç”¨äº¤æ¢æœº" aria-hidden="true">#</a> 8.2.2.2. ç»™æ™®é€šäº¤æ¢æœºç»‘å®šå¤‡ç”¨äº¤æ¢æœº</h5><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * å®šä¹‰æ­£å¸¸äº¤æ¢æœº
 */</span>
<span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">DirectExchange</span> <span class="token function">directExchange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">ExchangeBuilder</span>
        <span class="token comment">// äº¤æ¢æœºåå­—</span>
        <span class="token punctuation">.</span><span class="token function">directExchange</span><span class="token punctuation">(</span>exchangeNormalName<span class="token punctuation">)</span>
        <span class="token comment">// è®¾ç½®å¤‡ç”¨äº¤æ¢æœº</span>
        <span class="token punctuation">.</span><span class="token function">alternate</span><span class="token punctuation">(</span>exchangeAlternateName<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_8-2-2-3-å½“æŠ•é€’åˆ°é˜Ÿåˆ—å¤±è´¥æ—¶-æ¶ˆæ¯å°±ä¼šåˆ°å¤‡ç”¨äº¤æ¢æœºé‡Œäº†" tabindex="-1"><a class="header-anchor" href="#_8-2-2-3-å½“æŠ•é€’åˆ°é˜Ÿåˆ—å¤±è´¥æ—¶-æ¶ˆæ¯å°±ä¼šåˆ°å¤‡ç”¨äº¤æ¢æœºé‡Œäº†" aria-hidden="true">#</a> 8.2.2.3. å½“æŠ•é€’åˆ°é˜Ÿåˆ—å¤±è´¥æ—¶ï¼Œæ¶ˆæ¯å°±ä¼šåˆ°å¤‡ç”¨äº¤æ¢æœºé‡Œäº†</h5><h4 id="_8-2-3-dlxå’Œå¤‡ç”¨äº¤æ¢æœºåŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_8-2-3-dlxå’Œå¤‡ç”¨äº¤æ¢æœºåŒºåˆ«" aria-hidden="true">#</a> 8.2.3. DLXå’Œå¤‡ç”¨äº¤æ¢æœºåŒºåˆ«</h4><p>RabbitMQä¸­çš„DLXï¼ˆDead Letter Exchangeï¼‰å’Œå¤‡ç”¨äº¤æ¢æœºï¼ˆAlternate Exchangeï¼‰æ˜¯ä¸¤ç§ä¸åŒçš„æœºåˆ¶ã€‚</p><p><code>DLX</code>æ˜¯ä¸€ç§ç”¨äº<strong>å¤„ç†æ— æ³•è¢«æ¶ˆè´¹è€…æ­£ç¡®å¤„ç†çš„æ¶ˆæ¯</strong>çš„æœºåˆ¶ã€‚å½“æ¶ˆæ¯åœ¨é˜Ÿåˆ—ä¸­è¢«æ‹’ç»æˆ–è€…è¶…æ—¶æœªè¢«æ¶ˆè´¹è€…å¤„ç†æ—¶ï¼ŒDLXä¼šå°†è¿™äº›æ¶ˆæ¯é‡æ–°è·¯ç”±åˆ°å¦ä¸€ä¸ªäº¤æ¢æœºæˆ–è€…é˜Ÿåˆ—ä¸­ã€‚DLXå¯ä»¥å¸®åŠ©åº”ç”¨ç¨‹åºå¤„ç†é‚£äº›æ— æ³•å¤„ç†çš„æ¶ˆæ¯ï¼Œå¹¶ä¸”å¯ä»¥æé«˜æ¶ˆæ¯å¤„ç†çš„å¯é æ€§ã€‚</p><p><code>å¤‡ç”¨äº¤æ¢æœº</code>æ˜¯ä¸€ç§ç”¨äº<strong>å¤„ç†æ— æ³•è¢«è·¯ç”±åˆ°ç›®æ ‡é˜Ÿåˆ—çš„æ¶ˆæ¯</strong>çš„æœºåˆ¶ã€‚å½“æ¶ˆæ¯æ— æ³•è¢«è·¯ç”±åˆ°ç›®æ ‡é˜Ÿåˆ—æ—¶ï¼Œäº¤æ¢æœºä¼šå°†è¿™äº›æ¶ˆæ¯é‡æ–°è·¯ç”±åˆ°å¦ä¸€ä¸ªå¤‡ç”¨äº¤æ¢æœºæˆ–è€…é˜Ÿåˆ—ä¸­ã€‚å¤‡ç”¨äº¤æ¢æœºå¯ä»¥å¸®åŠ©åº”ç”¨ç¨‹åºå¤„ç†é‚£äº›æ— æ³•è¢«è·¯ç”±çš„æ¶ˆæ¯ï¼Œå¹¶ä¸”å¯ä»¥æé«˜æ¶ˆæ¯å¤„ç†çš„å¯é æ€§ã€‚</p><p>å› æ­¤ï¼ŒDLXå’Œå¤‡ç”¨äº¤æ¢æœºçš„ä½œç”¨è™½ç„¶æœ‰ä¸€å®šçš„é‡å ï¼Œä½†æ˜¯å®ƒä»¬å¤„ç†çš„é—®é¢˜ä¸åŒï¼Œå…·æœ‰ä¸åŒçš„åº”ç”¨åœºæ™¯ã€‚</p><h2 id="_9-é˜Ÿåˆ—å±æ€§" tabindex="-1"><a class="header-anchor" href="#_9-é˜Ÿåˆ—å±æ€§" aria-hidden="true">#</a> 9. é˜Ÿåˆ—å±æ€§</h2><blockquote><p>åœ¨åˆ›å»ºé˜Ÿåˆ—çš„æ—¶å€™ï¼Œå¯ä»¥æŒ‡å®šçš„ä¸€äº›å±æ€§ã€‚</p><p>æ³¨æ„ï¼šåˆ›å»ºäº¤æ¢æœºæˆ–è€…é˜Ÿåˆ—å®Œæˆåå†é‡æ–°åˆ›å»ºï¼Œå¦‚æœä¿®æ”¹äº¤æ¢æœºæˆ–é˜Ÿåˆ—å‚æ•°åˆ™ä¼šæŠ¥é”™ï¼</p></blockquote><p>Typeï¼šé˜Ÿåˆ—ç±»å‹</p><p>Nameï¼šé˜Ÿåˆ—åç§°ï¼Œå°±æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œéšä¾¿ä¸€ä¸ªå­—ç¬¦ä¸²å°±å¯ä»¥ï¼›</p><p>Durabilityï¼šå£°æ˜é˜Ÿåˆ—æ˜¯å¦æŒä¹…åŒ–ï¼Œä»£è¡¨é˜Ÿåˆ—åœ¨æœåŠ¡å™¨é‡å¯åæ˜¯å¦è¿˜å­˜åœ¨ï¼›</p><p>Auto deleteï¼š æ˜¯å¦è‡ªåŠ¨åˆ é™¤ï¼Œå¦‚æœä¸ºtrueï¼Œå½“æ²¡æœ‰æ¶ˆè´¹è€…è¿æ¥åˆ°è¿™ä¸ªé˜Ÿåˆ—çš„æ—¶å€™ï¼Œé˜Ÿåˆ—ä¼šè‡ªåŠ¨åˆ é™¤ï¼›</p><p>Exclusiveï¼šexclusiveå±æ€§çš„<a href="https://so.csdn.net/so/search?q=%E9%98%9F%E5%88%97&amp;spm=1001.2101.3001.7020" target="_blank" rel="noopener noreferrer">é˜Ÿåˆ—<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>åªå¯¹é¦–æ¬¡å£°æ˜å®ƒçš„è¿æ¥å¯è§ï¼Œå¹¶ä¸”åœ¨è¿æ¥æ–­å¼€æ—¶è‡ªåŠ¨åˆ é™¤ï¼›åŸºæœ¬ä¸Šä¸è®¾ç½®å®ƒï¼Œè®¾ç½®æˆfalse</p><p>Argumentsï¼šé˜Ÿåˆ—çš„å…¶ä»–å±æ€§ï¼Œä¾‹å¦‚æŒ‡å®šDLXï¼ˆæ­»ä¿¡äº¤æ¢æœºç­‰ï¼‰ï¼›</p><ol><li><p>1ã€x-expiresï¼šNumber</p><ul><li>å½“Queueï¼ˆé˜Ÿåˆ—ï¼‰åœ¨æŒ‡å®šçš„æ—¶é—´æœªè¢«è®¿é—®ï¼Œåˆ™é˜Ÿåˆ—å°†è¢«è‡ªåŠ¨åˆ é™¤ï¼›</li></ul></li><li><p>x-message-ttlï¼šNumber</p><ul><li>å‘å¸ƒçš„æ¶ˆæ¯åœ¨é˜Ÿåˆ—ä¸­å­˜åœ¨å¤šé•¿æ—¶é—´åè¢«å–æ¶ˆï¼ˆå•ä½æ¯«ç§’ï¼‰ï¼›</li></ul></li><li><p>3ã€x-overflowï¼šString</p><ul><li>è®¾ç½®é˜Ÿåˆ—æº¢å‡ºè¡Œä¸ºï¼Œå½“è¾¾åˆ°é˜Ÿåˆ—çš„æœ€å¤§é•¿åº¦æ—¶ï¼Œæ¶ˆæ¯ä¼šå‘ç”Ÿä»€ä¹ˆï¼Œæœ‰æ•ˆå€¼ä¸ºDrop Headæˆ–Reject Publishï¼›</li></ul></li><li><p>4ã€x-max-lengthï¼šNumber</p><ul><li>é˜Ÿåˆ—æ‰€èƒ½å®¹ä¸‹æ¶ˆæ¯çš„æœ€å¤§é•¿åº¦ï¼Œå½“è¶…å‡ºé•¿åº¦åï¼Œæ–°æ¶ˆæ¯å°†ä¼šè¦†ç›–æœ€å‰é¢çš„æ¶ˆæ¯ï¼Œç±»ä¼¼äºRedisçš„LRUç®—æ³•ï¼›</li></ul></li><li><p>5ã€ x-single-active-consumerï¼šé»˜è®¤ä¸ºfalse</p><ul><li>æ¿€æ´»å•ä¸€çš„æ¶ˆè´¹è€…ï¼Œä¹Ÿå°±æ˜¯è¯¥é˜Ÿåˆ—åªèƒ½æœ‰ä¸€ä¸ªæ¶ˆæ¯è€…æ¶ˆè´¹æ¶ˆæ¯ï¼›</li></ul></li><li><p>6ã€x-max-length-bytesï¼šNumber</p><ul><li>é™å®šé˜Ÿåˆ—çš„æœ€å¤§å ç”¨ç©ºé—´ï¼Œå½“è¶…å‡ºåä¹Ÿä½¿ç”¨ç±»ä¼¼äºRedisçš„LRUç®—æ³•ï¼›</li></ul></li><li><p>7ã€x-dead-letter-exchangeï¼šString</p><ul><li>æŒ‡å®šé˜Ÿåˆ—å…³è”çš„æ­»ä¿¡äº¤æ¢æœºï¼Œæœ‰æ—¶å€™æˆ‘ä»¬å¸Œæœ›å½“é˜Ÿåˆ—çš„æ¶ˆæ¯è¾¾åˆ°ä¸Šé™åæº¢å‡ºçš„æ¶ˆæ¯ä¸ä¼šè¢«åˆ é™¤æ‰ï¼Œè€Œæ˜¯èµ°åˆ°å¦ä¸€ä¸ªé˜Ÿåˆ—ä¸­ä¿å­˜èµ·æ¥ï¼›</li></ul></li><li><p>8.x-dead-letter-routing-keyï¼šString</p><ul><li>æŒ‡å®šæ­»ä¿¡äº¤æ¢æœºçš„è·¯ç”±é”®ï¼Œä¸€èˆ¬å’Œ6ä¸€èµ·å®šä¹‰ï¼›</li></ul></li><li><p>9.x-max-priorityï¼šNumber</p><ul><li><p>å¦‚æœå°†ä¸€ä¸ªé˜Ÿåˆ—åŠ ä¸Šä¼˜å…ˆçº§å‚æ•°ï¼Œé‚£ä¹ˆè¯¥é˜Ÿåˆ—ä¸ºä¼˜å…ˆçº§é˜Ÿåˆ—ï¼›</p></li><li><p>ï¼ˆ1ï¼‰ã€ç»™é˜Ÿåˆ—åŠ ä¸Šä¼˜å…ˆçº§å‚æ•°ä½¿å…¶æˆä¸ºä¼˜å…ˆçº§é˜Ÿåˆ—</p></li><li><p>x-max-priority=10ã€0-255å–å€¼èŒƒå›´ã€‘</p></li><li><p>ï¼ˆ2ï¼‰ã€ç»™æ¶ˆæ¯åŠ ä¸Šä¼˜å…ˆçº§å±æ€§</p></li><li><p>é€šè¿‡ä¼˜å…ˆçº§ç‰¹æ€§ï¼Œå°†ä¸€ä¸ªé˜Ÿåˆ—å®ç°æ’é˜Ÿæ¶ˆè´¹ï¼›</p></li><li><p>MessageProperties messageProperties=new MessageProperties();messageProperties.setPriority(8);</p></li><li></li></ul></li><li><p>10ã€x-queue-modeï¼šStringï¼ˆç†è§£ä¸‹å³å¯ï¼‰</p><ul><li>é˜Ÿåˆ—ç±»å‹x-queue-mode=lazyæ‡’é˜Ÿåˆ—ï¼Œåœ¨ç£ç›˜ä¸Šå°½å¯èƒ½å¤šåœ°ä¿ç•™æ¶ˆæ¯ä»¥å‡å°‘RAMä½¿ç”¨ï¼Œå¦‚æœæœªè®¾ç½®ï¼Œåˆ™é˜Ÿåˆ—å°†ä¿ç•™å†…å­˜ç¼“å­˜ä»¥å°½å¯èƒ½å¿«åœ°ä¼ é€’æ¶ˆæ¯ï¼›</li></ul></li><li><p>11ã€x-queue-master-locatorï¼šStringï¼ˆç”¨çš„è¾ƒå°‘ï¼Œä¸è®²ï¼‰</p><ul><li><p>åœ¨é›†ç¾¤æ¨¡å¼ä¸‹è®¾ç½®é˜Ÿåˆ—åˆ†é…åˆ°çš„ä¸»èŠ‚ç‚¹ä½ç½®ä¿¡æ¯ï¼›</p></li><li><p>æ¯ä¸ªqueueéƒ½æœ‰ä¸€ä¸ªmasterèŠ‚ç‚¹ï¼Œæ‰€æœ‰å¯¹äºqueueçš„æ“ä½œéƒ½æ˜¯äº‹å…ˆåœ¨masterä¸Šå®Œæˆï¼Œä¹‹åå†slaveä¸Šè¿›è¡Œç›¸åŒçš„æ“ä½œï¼›</p></li><li><p>æ¯ä¸ªä¸åŒçš„queueå¯ä»¥åè½åœ¨ä¸åŒçš„é›†ç¾¤èŠ‚ç‚¹ä¸Šï¼Œè¿™äº›queueå¦‚æœé…ç½®äº†é•œåƒé˜Ÿåˆ—ï¼Œé‚£ä¹ˆä¼šæœ‰1ä¸ªmasterå’Œå¤šä¸ªslaveã€‚</p></li><li><p>åŸºæœ¬ä¸Šæ‰€æœ‰çš„æ“ä½œéƒ½è½åœ¨masterä¸Šï¼Œé‚£ä¹ˆå¦‚æœè¿™äº›queuesçš„masteréƒ½è½åœ¨ä¸ªåˆ«çš„æœåŠ¡èŠ‚ç‚¹ä¸Šï¼Œè€Œå…¶ä»–çš„èŠ‚ç‚¹åˆå¾ˆç©ºé—²ï¼Œè¿™æ ·å°±æ— æ³•åšåˆ°è´Ÿè½½å‡è¡¡ï¼Œé‚£ä¹ˆåŠ¿å¿…ä¼šå½±å“æ€§èƒ½ï¼›</p></li><li><p>å…³äºmaster queue host çš„åˆ†é…æœ‰å‡ ç§ç­–ç•¥ï¼Œå¯ä»¥åœ¨queueå£°æ˜çš„æ—¶å€™ä½¿ç”¨x-queue-master-locatorå‚æ•°ï¼Œæˆ–è€…åœ¨policyä¸Šè®¾ç½®queue-master-locatorï¼Œæˆ–è€…ç›´æ¥åœ¨rabbitmqçš„é…ç½®æ–‡ä»¶ä¸­å®šä¹‰queue_master_locatorï¼Œæœ‰ä¸‰ç§å¯ä¾›é€‰æ‹©çš„ç­–ç•¥ï¼š</p></li><li><p>ï¼ˆ1ï¼‰min-mastersï¼šé€‰æ‹©master queueæ•°æœ€å°‘çš„é‚£ä¸ªæœåŠ¡èŠ‚ç‚¹hostï¼›</p></li><li><p>ï¼ˆ2ï¼‰client-localï¼šé€‰æ‹©ä¸clientç›¸è¿æ¥çš„é‚£ä¸ªæœåŠ¡èŠ‚ç‚¹hostï¼›</p></li><li><p>ï¼ˆ3ï¼‰randomï¼šéšæœºåˆ†é…ï¼›</p></li></ul></li></ol><h2 id="_10-å¹‚ç­‰æ€§é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#_10-å¹‚ç­‰æ€§é—®é¢˜" aria-hidden="true">#</a> 10. å¹‚ç­‰æ€§é—®é¢˜</h2><h3 id="_10-1-ä»€ä¹ˆæ˜¯å¹‚ç­‰æ€§" tabindex="-1"><a class="header-anchor" href="#_10-1-ä»€ä¹ˆæ˜¯å¹‚ç­‰æ€§" aria-hidden="true">#</a> 10.1. ä»€ä¹ˆæ˜¯å¹‚ç­‰æ€§</h3><p>æ¶ˆæ¯å¹‚ç­‰æ€§å°±æ˜¯<code>æ¶ˆæ¯ä¸è¢«é‡å¤æ¶ˆè´¹</code></p><p>åŒä¸€ä¸ªæ¶ˆæ¯åªèƒ½å¤„ç†ä¸€æ¬¡ï¼Œå†æ”¶åˆ°ä¸€æ¬¡å°±ä¸èƒ½å†æ‰§è¡Œäº†ï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´é‡å¤å¤„ç†çš„é—®é¢˜ã€‚</p><h3 id="_10-2-å¯èƒ½å¼•èµ·é‡å¤æ“ä½œçš„æƒ…å†µ" tabindex="-1"><a class="header-anchor" href="#_10-2-å¯èƒ½å¼•èµ·é‡å¤æ“ä½œçš„æƒ…å†µ" aria-hidden="true">#</a> 10.2. å¯èƒ½å¼•èµ·é‡å¤æ“ä½œçš„æƒ…å†µ</h3><p>åœ¨HTTPè¯·æ±‚ä¸­ï¼š</p><ul><li>GETã€DELETEã€PUTå¤šæ¬¡é‡å¤ä¸ä¼šæœ‰é—®é¢˜</li><li><code>POST</code>çš„æäº¤æ“ä½œå¯èƒ½ä¼šå¯¼è‡´é‡å¤æ·»åŠ æ•°æ®é—®é¢˜</li></ul><p>åœ¨SQLä¸­ï¼š</p><ul><li>selectã€deleteã€getå¤šæ¬¡é‡å¤ä¸ä¼šæœ‰é—®é¢˜</li><li><code>insert</code>çš„æäº¤æ“ä½œå¯èƒ½ä¼šå¯¼è‡´é‡å¤æ·»åŠ æ•°æ®é—®é¢˜</li></ul><h3 id="_10-3-å¦‚ä½•è¾¾åˆ°æ¶ˆæ¯å¹‚ç­‰æ€§" tabindex="-1"><a class="header-anchor" href="#_10-3-å¦‚ä½•è¾¾åˆ°æ¶ˆæ¯å¹‚ç­‰æ€§" aria-hidden="true">#</a> 10.3. å¦‚ä½•è¾¾åˆ°æ¶ˆæ¯å¹‚ç­‰æ€§</h3><blockquote><p>é€šè¿‡é…åˆ<code>Redis</code>å®ç°ä¸é‡å¤æ¶ˆæ¯</p></blockquote><ol><li>åœ¨ç”Ÿäº§è€…å‘é€æ¶ˆæ¯æ—¶ï¼Œæ¶ˆæ¯å¸¦ä¸Šäº†<code>å”¯ä¸€ID</code></li><li>æ¶ˆè´¹è€…æ¥æ”¶åˆ°æ¶ˆæ¯ï¼Œé€šè¿‡Redisçš„<code>setnx</code>å‘½ä»¤ï¼ˆJavaä»£ç ä¸­çš„<code>setIfAbsent</code>ï¼‰å‘Redisä¸­ç¼“å­˜æ¶ˆæ¯ <ul><li>å¦‚æœç¼“å­˜æˆåŠŸï¼Œè¯´æ˜æ¶ˆæ¯æ˜¯ç¬¬ä¸€æ¬¡æ¥æ”¶åˆ°ï¼Œå¯ä»¥æ‰§è¡Œåç»­ä¸šåŠ¡é€»è¾‘</li><li>å¦‚æœç¼“å­˜å¤±è´¥ï¼Œè¯´æ˜æ¶ˆæ¯å·²ç»é‡å¤æ¥æ”¶äº†ï¼Œç›´æ¥è·³è¿‡å³å¯</li></ul></li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//æŠŠæ¶ˆæ¯çš„å”¯ä¸€IDå†™å…¥redis</span>
<span class="token comment">//å¦‚æœredisä¸­è¯¥keyä¸å­˜åœ¨ï¼Œé‚£ä¹ˆå°±è®¾ç½®ï¼Œå­˜åœ¨å°±ä¸è®¾ç½®</span>
<span class="token keyword">boolean</span> flag <span class="token operator">=</span> stringRedisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setIfAbsent</span><span class="token punctuation">(</span><span class="token string">&quot;idempotent:&quot;</span> <span class="token operator">+</span> orders<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>orders<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 

<span class="token keyword">if</span> <span class="token punctuation">(</span>flag<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token comment">//keyä¸å­˜åœ¨è¿”å›true</span>
    <span class="token comment">//ç›¸å½“äºæ˜¯ç¬¬ä¸€æ¬¡æ¶ˆè´¹è¯¥æ¶ˆæ¯</span>
    <span class="token comment">//TODO å¤„ç†ä¸šåŠ¡</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æ­£å¸¸å¤„ç†ä¸šåŠ¡.....&quot;</span> <span class="token operator">+</span> orders<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><footer class="page-meta"><div class="meta-item edit-link"><span class="xicon-container left meta-item-label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M2 26h28v2H2z" fill="currentColor"></path><path d="M25.4 9c.8-.8.8-2 0-2.8l-3.6-3.6c-.8-.8-2-.8-2.8 0l-15 15V24h6.4l15-15zm-5-5L24 7.6l-3 3L17.4 7l3-3zM6 22v-3.6l10-10l3.6 3.6l-10 10H6z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Edit this page<!--]--></span></span></div><div class="meta-item last-updated"><span class="xicon-container left meta-item-label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M26 4h-4V2h-2v2h-8V2h-2v2H6c-1.1 0-2 .9-2 2v20c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 22H6V12h20v14zm0-16H6V6h4v2h2V6h8v2h2V6h4v4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->æœ€è¿‘æ›´æ–°æ—¶é—´ 11/3/2023, 9:18:21 AM<!--]--></span></span></div></footer><!----><!----></main><!--]--><div class="page-catalog-container"><h5 class="tip">ON THIS PAGE</h5><ul><!--[--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/note/blogs/RabbitMQ/MyNote_RabbitMQ.html#_1-rabbitmqå·¥ä½œæ¨¡å‹" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="1. RabbitMQå·¥ä½œæ¨¡å‹"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->1. RabbitMQå·¥ä½œæ¨¡å‹<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/note/blogs/RabbitMQ/MyNote_RabbitMQ.html#_1-1-å„éƒ¨åˆ†è§’è‰²ä»‹ç»" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="1.1. å„éƒ¨åˆ†è§’è‰²ä»‹ç»"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->1.1. å„éƒ¨åˆ†è§’è‰²ä»‹ç»<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/note/blogs/RabbitMQ/MyNote_RabbitMQ.html#_2-åœ¨springbootä¸­ä½¿ç”¨rabbitmqæ­¥éª¤" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="2. åœ¨SpringBootä¸­ä½¿ç”¨RabbitMQæ­¥éª¤"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2. åœ¨SpringBootä¸­ä½¿ç”¨RabbitMQæ­¥éª¤<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/note/blogs/RabbitMQ/MyNote_RabbitMQ.html#_2-1-åŠ å…¥amqpä¾èµ–" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="2.1. åŠ å…¥AMQPä¾èµ–"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2.1. åŠ å…¥AMQPä¾èµ–<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/note/blogs/RabbitMQ/MyNote_RabbitMQ.html#_2-2-ç¼–å†™rabbitmqé…ç½®ç±»" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="2.2. ç¼–å†™RabbitMQé…ç½®ç±»"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2.2. ç¼–å†™RabbitMQé…ç½®ç±»<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/note/blogs/RabbitMQ/MyNote_RabbitMQ.html#_2-3-å‘é€æ¶ˆæ¯" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="2.3. å‘é€æ¶ˆæ¯"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2.3. å‘é€æ¶ˆæ¯<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/note/blogs/RabbitMQ/MyNote_RabbitMQ.html#_2-4-æ¥æ”¶æ¶ˆæ¯" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="2.4. æ¥æ”¶æ¶ˆæ¯"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2.4. æ¥æ”¶æ¶ˆæ¯<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/note/blogs/RabbitMQ/MyNote_RabbitMQ.html#_3-äº¤æ¢æœºexchange" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="3. äº¤æ¢æœºExchange"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->3. äº¤æ¢æœºExchange<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/note/blogs/RabbitMQ/MyNote_RabbitMQ.html#_3-1-æ‰‡å½¢äº¤æ¢æœº-fanout-exchange" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="3.1. æ‰‡å½¢äº¤æ¢æœºï¼ˆFanout Exchangeï¼‰"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->3.1. æ‰‡å½¢äº¤æ¢æœºï¼ˆFanout Exchangeï¼‰<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/note/blogs/RabbitMQ/MyNote_RabbitMQ.html#_3-2-ç›´è¿äº¤æ¢æœº-direct-exchange" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="3.2. ç›´è¿äº¤æ¢æœºï¼ˆDirect Exchangeï¼‰"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->3.2. ç›´è¿äº¤æ¢æœºï¼ˆDirect Exchangeï¼‰<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/note/blogs/RabbitMQ/MyNote_RabbitMQ.html#_3-3-ä¸»é¢˜äº¤æ¢æœº-topic-exchange" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="3.3. ä¸»é¢˜äº¤æ¢æœºï¼ˆTopic Exchangeï¼‰"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->3.3. ä¸»é¢˜äº¤æ¢æœºï¼ˆTopic Exchangeï¼‰<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/note/blogs/RabbitMQ/MyNote_RabbitMQ.html#_3-4-å¤´äº¤æ¢æœº-headers-exchange" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="3.4. å¤´äº¤æ¢æœºï¼ˆHeaders Exchangeï¼‰"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->3.4. å¤´äº¤æ¢æœºï¼ˆHeaders Exchangeï¼‰<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/note/blogs/RabbitMQ/MyNote_RabbitMQ.html#_4-ttl" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="4. TTL"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->4. TTL<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/note/blogs/RabbitMQ/MyNote_RabbitMQ.html#_4-1-ç»™é˜Ÿåˆ—è®¾ç½®ttl" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="4.1. ç»™é˜Ÿåˆ—è®¾ç½®TTL"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->4.1. ç»™é˜Ÿåˆ—è®¾ç½®TTL<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/note/blogs/RabbitMQ/MyNote_RabbitMQ.html#_4-2-ç»™å•æ¡æ¶ˆæ¯è®¾ç½®ttl" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="4.2. ç»™å•æ¡æ¶ˆæ¯è®¾ç½®TTL"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->4.2. ç»™å•æ¡æ¶ˆæ¯è®¾ç½®TTL<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/note/blogs/RabbitMQ/MyNote_RabbitMQ.html#_5-ğŸ”´æ­»ä¿¡é˜Ÿåˆ—" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="5. ğŸ”´æ­»ä¿¡é˜Ÿåˆ—"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->5. ğŸ”´æ­»ä¿¡é˜Ÿåˆ—<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/note/blogs/RabbitMQ/MyNote_RabbitMQ.html#_5-1-æ˜¯ä»€ä¹ˆ" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="5.1. æ˜¯ä»€ä¹ˆ"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->5.1. æ˜¯ä»€ä¹ˆ<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/note/blogs/RabbitMQ/MyNote_RabbitMQ.html#_5-2-è®©æ¶ˆæ¯å˜ä¸ºæ­»ä¿¡çš„ç‰¹æ®Šæƒ…å†µ" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="5.2. è®©æ¶ˆæ¯å˜ä¸ºæ­»ä¿¡çš„ç‰¹æ®Šæƒ…å†µ"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->5.2. è®©æ¶ˆæ¯å˜ä¸ºæ­»ä¿¡çš„ç‰¹æ®Šæƒ…å†µ<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/note/blogs/RabbitMQ/MyNote_RabbitMQ.html#_5-3-ç»™é˜Ÿåˆ—é…ç½®æ­»ä¿¡äº¤æ¢æœº" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="5.3. ç»™é˜Ÿåˆ—é…ç½®æ­»ä¿¡äº¤æ¢æœº"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->5.3. ç»™é˜Ÿåˆ—é…ç½®æ­»ä¿¡äº¤æ¢æœº<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/note/blogs/RabbitMQ/MyNote_RabbitMQ.html#_5-4-ttlæ­»ä¿¡" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="5.4. TTLæ­»ä¿¡"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->5.4. TTLæ­»ä¿¡<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/note/blogs/RabbitMQ/MyNote_RabbitMQ.html#_5-5-æœ€å¤§é•¿åº¦å¯¼è‡´æ­»ä¿¡" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="5.5. æœ€å¤§é•¿åº¦å¯¼è‡´æ­»ä¿¡"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->5.5. æœ€å¤§é•¿åº¦å¯¼è‡´æ­»ä¿¡<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/note/blogs/RabbitMQ/MyNote_RabbitMQ.html#_5-6-æ¶ˆè´¹è€…æ‰‹åŠ¨ç¡®è®¤æ¨¡å¼æ‹’ç»æ¶ˆæ¯" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="5.6. æ¶ˆè´¹è€…æ‰‹åŠ¨ç¡®è®¤æ¨¡å¼æ‹’ç»æ¶ˆæ¯"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->5.6. æ¶ˆè´¹è€…æ‰‹åŠ¨ç¡®è®¤æ¨¡å¼æ‹’ç»æ¶ˆæ¯<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/note/blogs/RabbitMQ/MyNote_RabbitMQ.html#_6-ğŸ”´å»¶è¿Ÿé˜Ÿåˆ—" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="6. ğŸ”´å»¶è¿Ÿé˜Ÿåˆ—"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->6. ğŸ”´å»¶è¿Ÿé˜Ÿåˆ—<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/note/blogs/RabbitMQ/MyNote_RabbitMQ.html#_6-1-æ˜¯ä»€ä¹ˆ" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="6.1. æ˜¯ä»€ä¹ˆ"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->6.1. æ˜¯ä»€ä¹ˆ<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/note/blogs/RabbitMQ/MyNote_RabbitMQ.html#_6-2-ttl-dlxç»„åˆå®ç°å»¶è¿Ÿé˜Ÿåˆ—" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="6.2. TTL+DLXç»„åˆå®ç°å»¶è¿Ÿé˜Ÿåˆ—"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->6.2. TTL+DLXç»„åˆå®ç°å»¶è¿Ÿé˜Ÿåˆ—<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/note/blogs/RabbitMQ/MyNote_RabbitMQ.html#_6-3-å»¶è¿Ÿé˜Ÿåˆ—é—®é¢˜-ttlä¸ä¸€è‡´é—®é¢˜" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="6.3. å»¶è¿Ÿé˜Ÿåˆ—é—®é¢˜ï¼šTTLä¸ä¸€è‡´é—®é¢˜"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->6.3. å»¶è¿Ÿé˜Ÿåˆ—é—®é¢˜ï¼šTTLä¸ä¸€è‡´é—®é¢˜<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/note/blogs/RabbitMQ/MyNote_RabbitMQ.html#_6-4-æ’ä»¶å®ç°å»¶è¿Ÿé˜Ÿåˆ—" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="6.4. æ’ä»¶å®ç°å»¶è¿Ÿé˜Ÿåˆ—"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->6.4. æ’ä»¶å®ç°å»¶è¿Ÿé˜Ÿåˆ—<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/note/blogs/RabbitMQ/MyNote_RabbitMQ.html#_7-æ¶ˆæ¯æŠ•é€’å¯é æ€§" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="7. æ¶ˆæ¯æŠ•é€’å¯é æ€§"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->7. æ¶ˆæ¯æŠ•é€’å¯é æ€§<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/note/blogs/RabbitMQ/MyNote_RabbitMQ.html#_7-1-ç¬¬ä¸€é˜¶æ®µ-ç”Ÿäº§è€…åˆ°äº¤æ¢æœº" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="7.1. ç¬¬ä¸€é˜¶æ®µï¼šç”Ÿäº§è€…åˆ°äº¤æ¢æœº"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->7.1. ç¬¬ä¸€é˜¶æ®µï¼šç”Ÿäº§è€…åˆ°äº¤æ¢æœº<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/note/blogs/RabbitMQ/MyNote_RabbitMQ.html#_7-2-ç¬¬äºŒé˜¶æ®µ-äº¤æ¢æœºåˆ°é˜Ÿåˆ—" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="7.2. ç¬¬äºŒé˜¶æ®µï¼šäº¤æ¢æœºåˆ°é˜Ÿåˆ—"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->7.2. ç¬¬äºŒé˜¶æ®µï¼šäº¤æ¢æœºåˆ°é˜Ÿåˆ—<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/note/blogs/RabbitMQ/MyNote_RabbitMQ.html#_7-3-ç¬¬ä¸‰é˜¶æ®µ-æŒä¹…åŒ–" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="7.3. ç¬¬ä¸‰é˜¶æ®µï¼šæŒä¹…åŒ–"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->7.3. ç¬¬ä¸‰é˜¶æ®µï¼šæŒä¹…åŒ–<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/note/blogs/RabbitMQ/MyNote_RabbitMQ.html#_7-4-ç¬¬å››é˜¶æ®µ-é˜Ÿåˆ—åˆ°æ¶ˆè´¹è€…" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="7.4. ç¬¬å››é˜¶æ®µï¼šé˜Ÿåˆ—åˆ°æ¶ˆè´¹è€…"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->7.4. ç¬¬å››é˜¶æ®µï¼šé˜Ÿåˆ—åˆ°æ¶ˆè´¹è€…<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/note/blogs/RabbitMQ/MyNote_RabbitMQ.html#_8-äº¤æ¢æœºå±æ€§" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="8. äº¤æ¢æœºå±æ€§"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->8. äº¤æ¢æœºå±æ€§<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/note/blogs/RabbitMQ/MyNote_RabbitMQ.html#_8-1-è®¾ç½®å±æ€§" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="8.1. è®¾ç½®å±æ€§"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->8.1. è®¾ç½®å±æ€§<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/note/blogs/RabbitMQ/MyNote_RabbitMQ.html#_8-2-å¤‡ç”¨äº¤æ¢æœºè®¾ç½®" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="8.2. å¤‡ç”¨äº¤æ¢æœºè®¾ç½®"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->8.2. å¤‡ç”¨äº¤æ¢æœºè®¾ç½®<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/note/blogs/RabbitMQ/MyNote_RabbitMQ.html#_9-é˜Ÿåˆ—å±æ€§" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="9. é˜Ÿåˆ—å±æ€§"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->9. é˜Ÿåˆ—å±æ€§<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/note/blogs/RabbitMQ/MyNote_RabbitMQ.html#_10-å¹‚ç­‰æ€§é—®é¢˜" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="10. å¹‚ç­‰æ€§é—®é¢˜"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->10. å¹‚ç­‰æ€§é—®é¢˜<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/note/blogs/RabbitMQ/MyNote_RabbitMQ.html#_10-1-ä»€ä¹ˆæ˜¯å¹‚ç­‰æ€§" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="10.1. ä»€ä¹ˆæ˜¯å¹‚ç­‰æ€§"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->10.1. ä»€ä¹ˆæ˜¯å¹‚ç­‰æ€§<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/note/blogs/RabbitMQ/MyNote_RabbitMQ.html#_10-2-å¯èƒ½å¼•èµ·é‡å¤æ“ä½œçš„æƒ…å†µ" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="10.2. å¯èƒ½å¼•èµ·é‡å¤æ“ä½œçš„æƒ…å†µ"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->10.2. å¯èƒ½å¼•èµ·é‡å¤æ“ä½œçš„æƒ…å†µ<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/note/blogs/RabbitMQ/MyNote_RabbitMQ.html#_10-3-å¦‚ä½•è¾¾åˆ°æ¶ˆæ¯å¹‚ç­‰æ€§" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="10.3. å¦‚ä½•è¾¾åˆ°æ¶ˆæ¯å¹‚ç­‰æ€§"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->10.3. å¦‚ä½•è¾¾åˆ°æ¶ˆæ¯å¹‚ç­‰æ€§<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--]--></ul></div></div></div><!----><!----><!--]--></div>
    <script type="module" src="/note/assets/app-55752f72.js" defer></script>
  </body>
</html>
